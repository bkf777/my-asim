"use strict";(self.webpackChunkamis_editor_demo=self.webpackChunkamis_editor_demo||[]).push([[3716],{93716:function(t,e,n){n.r(e),n.d(e,{Tpl:function(){return d},TplRenderer:function(){return l}});var a=n(31635),s=n(96540),o=n(5917),r=n(62193),i=n.n(r),p=n(25627),d=function(t){function e(e){var n=t.call(this,e)||this;return n.sn=0,n.state={content:n.getContent()},n.mounted=!0,n}return(0,a.__extends)(e,t),e.prototype.componentDidUpdate=function(t){var e=this;!["tpl","html","text","raw","data","placeholder"].some(function(n){return!Object.is(t[n],e.props[n])})&&Object.is((0,o.$_G)(t),(0,o.$_G)(this.props))||this.updateContent()},e.prototype.componentDidMount=function(){this.updateContent()},e.prototype.componentWillUnmount=function(){this.mounted=!1},e.prototype.updateContent=function(){return(0,a.__awaiter)(this,void 0,void 0,function(){var t,e;return(0,a.__generator)(this,function(n){switch(n.label){case 0:return t=++this.sn,[4,this.getAsyncContent()];case 1:return e=n.sent(),t!==this.sn||this.mounted&&this.setState({content:e}),[2]}})})},e.prototype.getContent=function(){var t=this.props,e=t.tpl,n=t.html,a=t.text,s=t.raw,r=t.data,i=t.placeholder,p=(0,o.$_G)(this.props);return s||(n?(0,o.pbD)(n,r):e?(0,o.pbD)(e,r):a?(0,o.ZD5)((0,o.pbD)(a,r)):null==p||""===p?'<span class="text-muted">'.concat(i,"</span>"):"string"==typeof p?p:JSON.stringify(p))},e.prototype.getAsyncContent=function(){return(0,a.__awaiter)(this,void 0,void 0,function(){var t,e,n,s,r,i,p,d,l;return(0,a.__generator)(this,function(a){switch(a.label){case 0:return t=this.props,e=t.tpl,n=t.html,s=t.text,r=t.data,i=t.raw,p=t.placeholder,d=(0,o.$_G)(this.props),i?[2,i]:[3,1];case 1:return n?[2,(0,o.j7o)(n,r)]:[3,2];case 2:return e?[2,(0,o.j7o)(e,r)]:[3,3];case 3:return s?(l=o.ZD5,[4,(0,o.j7o)(s,r)]):[3,5];case 4:return[2,l.apply(void 0,[a.sent()])];case 5:return[2,null==d||""===d?'<span class="text-muted">'.concat(p,"</span>"):"string"==typeof d?d:JSON.stringify(d)]}})})},e.prototype.getTitle=function(t){var e;if(!this.props.showNativeTitle)return"";var n="string"==typeof t?t:"",a=(new DOMParser).parseFromString(t,"text/html");return(null===(e=null==a?void 0:a.body)||void 0===e?void 0:e.textContent)&&(n=a.body.textContent),n},e.prototype.handleClick=function(t){var e=this.props;(0,e.dispatchEvent)(t,e.data)},e.prototype.handleMouseEnter=function(t){var e=this.props;(0,e.dispatchEvent)(t,e.data)},e.prototype.handleMouseLeave=function(t){var e=this.props;(0,e.dispatchEvent)(t,e.data)},e.prototype.render=function(){var t,e=this.props,n=e.className,r=e.wrapperComponent,p=e.inline,d=e.classnames,l=e.style,u=e.maxLine,c=e.showNativeTitle,_=e.data,m=e.id,h=e.wrapperCustomStyle,y=e.env,g=e.themeCss,v=e.testIdBuilder,f=r||(p?"span":"div"),C=this.state.content,b={},w="";return u>0&&(w="max-line",b.WebkitLineClamp=+u),s.createElement(f,(0,a.__assign)({className:d("TplField fr-view",n,(0,o.NH8)((0,a.__assign)((0,a.__assign)({},this.props),{name:"baseControlClassName",id:m,themeCss:g})),(0,o.NH8)((0,a.__assign)((0,a.__assign)({},this.props),{name:"wrapperCustomStyle",id:m,themeCss:h}))),style:(0,o.K8U)(l,_)},c?{title:this.getTitle(C)}:{},{onClick:this.handleClick,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},null===(t=null==v?void 0:v.getChild("tpl"))||void 0===t?void 0:t.getTestId()),s.createElement("span",{className:w?d(w):void 0,style:i()(b)?void 0:b,dangerouslySetInnerHTML:{__html:y.filterHtml(C)}}),s.createElement(o.z4D,(0,a.__assign)({},this.props,{config:{wrapperCustomStyle:h,id:m,themeCss:g,classNames:[{key:"baseControlClassName"}]},env:y})))},e.defaultProps={inline:!0,placeholder:""},(0,a.__decorate)([o.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",Promise)],e.prototype,"updateContent",null),(0,a.__decorate)([o.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",void 0)],e.prototype,"getContent",null),(0,a.__decorate)([o.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",Promise)],e.prototype,"getAsyncContent",null),(0,a.__decorate)([o.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[String]),(0,a.__metadata)("design:returntype",void 0)],e.prototype,"getTitle",null),(0,a.__decorate)([o.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object]),(0,a.__metadata)("design:returntype",void 0)],e.prototype,"handleClick",null),(0,a.__decorate)([o.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object]),(0,a.__metadata)("design:returntype",void 0)],e.prototype,"handleMouseEnter",null),(0,a.__decorate)([o.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object]),(0,a.__metadata)("design:returntype",void 0)],e.prototype,"handleMouseLeave",null),e}(s.Component),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,a.__extends)(e,t),(0,a.__decorate)([(0,o.A49)({type:"tpl",alias:["html"],name:"tpl"}),p.GU],e)}(d)}}]);