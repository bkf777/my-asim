"use strict";(self.webpackChunkamis_editor_demo=self.webpackChunkamis_editor_demo||[]).push([[2359],{52359:function(e,t,n){n.r(t),n.d(t,{MultiSelectControlRenderer:function(){return g},SelectControlRenderer:function(){return _},default:function(){return v}});var o=n(31635),a=n(96540),i=n(32485),r=n.n(i),l=n(7309),s=n.n(l),d=n(38221),u=n.n(d),c=n(5917),p=n(25627),h=n(61816),m=n(66283),v=function(e){function t(t){var n=e.call(this,t)||this;return n.lastTerm="",n.fetchCancel=null,n.changeValue=n.changeValue.bind(n),n.lazyloadRemote=u()(n.loadRemote.bind(n),250,{trailing:!0,leading:!1}),n.inputRef=n.inputRef.bind(n),n}return(0,o.__extends)(t,e),t.prototype.componentDidUpdate=function(e){var t=this.props;(0,c.Amo)(t.autoComplete,t.data)&&(0,c.B92)(e.autoComplete,t.autoComplete,e.data,t.data)&&this.lazyloadRemote(this.lastTerm)},t.prototype.componentWillUnmount=function(){this.unHook&&this.unHook(),this.fetchCancel=null},t.prototype.inputRef=function(e){this.input=e},t.prototype.focus=function(){var e,t;this.input&&(null===(t=null===(e=this.input)||void 0===e?void 0:e.focus)||void 0===t||t.call(e))},t.prototype.getValue=function(e,t){void 0===t&&(t=[]);var n=this.props,o=n.joinValues,a=n.extractValue,i=n.delimiter,r=n.multiple,l=n.valueField,d=n.options,u=e;return(Array.isArray(e)?e:e?[e]:[]).forEach(function(e){s()(d,function(t){return t[l||"value"]==e[l||"value"]})||t.push(e)}),o?u=r?Array.isArray(e)?e.map(function(e){return e[l||"value"]}).join(i):e?e[l||"value"]:"":u?u[l||"value"]:"":a&&(u=r?Array.isArray(e)?e.map(function(e){return e[l||"value"]}):e?[e[l||"value"]]:[]:u?u[l||"value"]:""),u},t.prototype.dispatchEvent=function(e,t){return void 0===t&&(t={}),(0,o.__awaiter)(this,void 0,void 0,function(){var n,a,i,r,l,s,d,u;return(0,o.__generator)(this,function(o){switch(o.label){case 0:return n="on"+e.charAt(0).toUpperCase()+e.slice(1),a=this.props,i=a.dispatchEvent,r=a.options,l=a.value,s=a.multiple,d=a.selectedOptions,[4,i(e,(0,c.RKM)(this.props,{options:r,items:r,value:l,selectedItems:s?d:d[0]}))];case 1:return(null==(u=o.sent())?void 0:u.prevented)||this.props[n](t),[2]}})})},t.prototype.changeValue=function(e){return(0,o.__awaiter)(this,void 0,void 0,function(){var t,n,a,i,r,l,s,d;return(0,o.__generator)(this,function(o){switch(o.label){case 0:return t=this.props,n=t.onChange,a=t.setOptions,i=t.options,t.data,r=t.dispatchEvent,l=[],s=this.getValue(e,l),l.length&&a(i.concat(l)),[4,r("change",(0,c.RKM)(this.props,{value:s,options:i,items:i,selectedItems:e}))];case 1:return(null==(d=o.sent())?void 0:d.prevented)||null==n||n(s),[2]}})})},t.prototype.loadRemote=function(e){var t;return(0,o.__awaiter)(this,void 0,void 0,function(){var n,a,i,r,l,s,d,u,p,h,m,v,f=this;return(0,o.__generator)(this,function(o){switch(o.label){case 0:if(n=this.props,a=n.autoComplete,i=n.env,r=n.data,l=n.setOptions,s=n.setLoading,d=n.formInited,u=n.addHook,!i||!i.fetcher)throw new Error("fetcher is required");if(!1===d&&u)return this.unHook&&this.unHook(),[2,this.unHook=u(this.loadRemote.bind(this,e),"init")];if(this.lastTerm=e,p=(0,c.ed2)(r,{term:e,value:e}),!(0,c.Amo)(a,p))return[2,Promise.resolve({options:[]})];this.fetchCancel&&(null===(t=this.fetchCancel)||void 0===t||t.call(this,"autoComplete request cancelled."),this.fetchCancel=null,s(!1)),s(!0),o.label=1;case 1:return o.trys.push([1,,3,4]),[4,i.fetcher(a,p,{cancelExecutor:function(e){return f.fetchCancel=e}})];case 2:return h=o.sent(),this.fetchCancel=null,m=h.data&&h.data.options||h.data||[],v=this.mergeOptions(m),l(v),[2,{options:v}];case 3:return s(!1),[7];case 4:return[2]}})})},t.prototype.mergeOptions=function(e){var t=this.props,n=t.selectedOptions,a=t.valueField,i=void 0===a?"value":a,r=(0,c.a5s)(e,void 0,i).concat();return Array.isArray(n)&&n.length&&n.forEach(function(e){s()(r,function(t){return t[i]===e[i]})||r.push((0,o.__assign)((0,o.__assign)({},e),{hidden:!0}))}),r},t.prototype.renderMenu=function(e,t){var n=this.props,o=n.menuTpl,a=n.render,i=n.data,l=n.optionClassName,s=n.testIdBuilder;return a("menu/".concat(t.index),o,{showNativeTitle:!0,className:r()("Select-option-content",l),data:(0,c.ed2)((0,c.ed2)(i,t),e),testIdBuilder:null==s?void 0:s.getChild("option-"+e.value||0)})},t.prototype.reload=function(){var e=this.props.reloadOptions;e&&e()},t.prototype.option2value=function(){},t.prototype.renderOtherMode=function(){var e=this.props,t=e.selectMode,n=(0,o.__rest)(e,["selectMode"]);return a.createElement(f,(0,o.__assign)({},n,{selectMode:"group"===t?"list":t}))},t.prototype.doAction=function(e,t,n){var o,a,i,r=this.props,l=r.resetValue,s=r.onChange,d=r.formStore,u=r.store,p=r.name,h=r.valueField,m=null==e?void 0:e.actionType;if("clear"===m)null==s||s("");else if("reset"===m){var v=null!==(i=(0,c.dnO)(null!==(a=null==d?void 0:d.pristine)&&void 0!==a?a:null==u?void 0:u.pristine,p))&&void 0!==i?i:l,f=this.getValue(((o={})[h]=null!=v?v:"",o));null==s||s(f)}},t.prototype.handleOptionAdd=function(e,t,n,a){var i=this;void 0===e&&(e=-1),void 0===n&&(n=!1);var r=this.props,l=r.onAdd,s=r.autoComplete;null==l||l(e,t,n,function(){return(0,o.__awaiter)(i,void 0,void 0,function(){return(0,o.__generator)(this,function(e){switch(e.label){case 0:return null==a||a(t),s?[4,this.loadRemote(this.lastTerm)]:[3,2];case 1:return e.sent(),[2,!1];case 2:return[2]}})})})},t.prototype.handleOptionEdit=function(e,t,n,a){var i=this,r=this.props,l=r.onEdit,s=r.autoComplete;null==l||l(e,t,n,function(){return(0,o.__awaiter)(i,void 0,void 0,function(){return(0,o.__generator)(this,function(t){switch(t.label){case 0:return null==a||a(e),s?[4,this.loadRemote(this.lastTerm)]:[3,2];case 1:return t.sent(),[2,!1];case 2:return[2]}})})})},t.prototype.handleOptionDelete=function(e,t){var n=this,a=this.props,i=a.onDelete,r=a.autoComplete;null==i||i(e,function(){return(0,o.__awaiter)(n,void 0,void 0,function(){return(0,o.__generator)(this,function(n){switch(n.label){case 0:return null==t||t(e),r?[4,this.loadRemote(this.lastTerm)]:[3,2];case 1:return n.sent(),[2,!1];case 2:return[2]}})})})},t.prototype.render=function(){var e=this,t=this.props,n=t.autoComplete,i=t.searchable,l=t.showInvalidMatch,s=t.options,d=t.className,u=t.popoverClassName,h=t.style,m=t.loading,v=(t.value,t.selectedOptions),f=t.multi,_=t.multiple,g=t.placeholder,y=t.id,b=t.classPrefix,C=(t.classnames,t.creatable),O=(t.inline,t.noResultsText),M=t.render,w=t.menuTpl,A=t.borderMode,R=t.selectMode,T=t.env,E=t.mobileUI,I=t.overlay,F=t.filterOption,N=(0,o.__rest)(t,["autoComplete","searchable","showInvalidMatch","options","className","popoverClassName","style","loading","value","selectedOptions","multi","multiple","placeholder","id","classPrefix","classnames","creatable","inline","noResultsText","render","menuTpl","borderMode","selectMode","env","mobileUI","overlay","filterOption"]),k=this.props,x=k.classPrefix,V=k.themeCss;return O&&(O=M("noResultText",O)),a.createElement("div",{className:r()("".concat(b,"SelectControl"),d),style:h},["table","list","group","tree","chained","associated"].includes(R)?this.renderOtherMode():a.createElement(p.l6,(0,o.__assign)({},N,{onAdd:this.handleOptionAdd,onEdit:this.handleOptionEdit,onDelete:this.handleOptionDelete,className:r()((0,c.NH8)((0,o.__assign)((0,o.__assign)({},this.props),{name:"selectControlClassName",id:y,themeCss:V}))),popoverClassName:r()(u,(0,c.NH8)((0,o.__assign)((0,o.__assign)({},this.props),{name:"selectPopoverClassName",id:y,themeCss:V}))),mobileUI:E,popOverContainer:E?null==T?void 0:T.getModalContainer:N.popOverContainer||T.getModalContainer,borderMode:A,placeholder:g,multiple:_||f,ref:this.inputRef,value:v,options:s,filterOption:"string"==typeof F?(0,c.sce)(F,"options","inputValue","option"):F,loadOptions:(0,c.Amo)(n)?this.lazyloadRemote:void 0,showInvalidMatch:l,creatable:C,searchable:i||!!n,onChange:this.changeValue,onBlur:function(t){return e.dispatchEvent("blur",t)},onFocus:function(t){return e.dispatchEvent("focus",t)},loading:m,noResultsText:O,renderMenu:w?this.renderMenu:void 0,overlay:I})),a.createElement(c.z4D,(0,o.__assign)({},this.props,{config:{themeCss:V,classNames:[{key:"selectControlClassName",weights:{focused:{suf:".is-opened:not(.is-mobile)"},disabled:{suf:".is-disabled"}}},{key:"selectPopoverClassName",weights:{default:{suf:" .".concat(x,"Select-option")},hover:{suf:" .".concat(x,"Select-option.is-highlight")},focused:{inner:".".concat(x,"Select-option.is-active")}}}],id:y},env:T})))},t.defaultProps={clearable:!1,searchable:!1,multiple:!1,showInvalidMatch:!1},(0,o.__decorate)([c.d6t,(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],t.prototype,"renderMenu",null),(0,o.__decorate)([c.d6t,(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object,Boolean,Function]),(0,o.__metadata)("design:returntype",void 0)],t.prototype,"handleOptionAdd",null),(0,o.__decorate)([c.d6t,(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object,Boolean,Function]),(0,o.__metadata)("design:returntype",void 0)],t.prototype,"handleOptionEdit",null),(0,o.__decorate)([c.d6t,(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Function]),(0,o.__metadata)("design:returntype",void 0)],t.prototype,"handleOptionDelete",null),(0,o.__decorate)([(0,m.E)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[]),(0,o.__metadata)("design:returntype",void 0)],t.prototype,"render",null),t}(a.Component),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,o.__extends)(t,e),t.prototype.renderItem=function(e){var t=this.props,n=t.labelField,o=t.menuTpl,a=t.data,i=t.render;return o?i("option/".concat(e.value),o,{data:(0,c.ed2)(a,e)}):"".concat(e.scopeLabel||"").concat(e[n||"label"])},t.prototype.render=function(){var e,t=this.props,n=t.className,o=(t.classnames,t.selectedOptions),i=t.sortable,r=t.loading,l=t.searchable,s=t.searchResultMode,d=t.showArrow,u=t.deferLoad,c=t.disabled,h=t.clearable,m=t.selectTitle,v=t.selectMode,f=t.multiple,_=t.columns,g=t.leftMode,y=t.borderMode,b=t.mobileUI,C=t.env,O=t.popOverContainer,M=t.maxTagCount,w=t.overflowTagPopover,A=t.placeholder,R=t.itemHeight,T=t.virtualThreshold,E=t.rightMode,I=t.loadingConfig,F=t.labelField,N=t.showInvalidMatch,k=t.checkAll,x=t.checkAllLabel,V=t.overlay,j=t.valueField,H=this.props,D=H.options,P=H.leftOptions,S=H.leftDefaultValue;return"associated"===v&&D&&D.length&&D[0].leftOptions&&Array.isArray(D[0].children)&&(P=D[0].leftOptions,S=null!==(e=D[0].leftDefaultValue)&&void 0!==e?e:S,D=D[0].children),a.createElement(a.Fragment,null,a.createElement(p.pX,{selectMode:v,className:n,value:o,disabled:c,clearable:h,options:D,onChange:this.handleChange,option2value:this.option2value,optionItemRender:this.renderItem,itemRender:this.renderItem,sortable:i,searchResultMode:s,onSearch:l?this.handleSearch:void 0,showArrow:d,onDeferLoad:u,selectTitle:m,multiple:f,columns:_,leftMode:g,rightMode:E,leftOptions:P,borderMode:y,mobileUI:b,popOverContainer:O||C.getModalContainer,maxTagCount:M,overflowTagPopover:w,placeholder:A,itemHeight:R,virtualThreshold:T,virtualListHeight:266,labelField:F,showInvalidMatch:N,checkAllLabel:x,checkAll:k,overlay:V,valueField:j}),a.createElement(p.y$,{overlay:!0,key:"info",show:r,loadingConfig:I}))},(0,o.__decorate)([c.d6t,(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object]),(0,o.__metadata)("design:returntype",Object)],t.prototype,"renderItem",null),t}(h.BaseTransferRenderer),_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,o.__extends)(t,e),(0,o.__decorate)([(0,c.QqA)({type:"select"})],t)}(v),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,o.__extends)(t,e),t.defaultProps={multiple:!0},(0,o.__decorate)([(0,c.QqA)({type:"multi-select"})],t)}(v)}}]);