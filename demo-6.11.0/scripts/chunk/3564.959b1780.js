"use strict";(self.webpackChunkamis_editor_demo=self.webpackChunkamis_editor_demo||[]).push([[3564],{73564:function(e,t,a){a.r(t),a.d(t,{BaseTabsTransferRenderer:function(){return h},TabsTransferRenderer:function(){return _}});var n=a(31635),r=a(5917),i=a(96540),s=a(7309),o=a.n(s),l=a(25627),d=a(61816),u=a(63063),c=a(66283),p=a(51545),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={activeKey:0},t}return(0,n.__extends)(t,e),t.prototype.onTabChange=function(e){return(0,n.__awaiter)(this,void 0,void 0,function(){var t;return(0,n.__generator)(this,function(a){switch(a.label){case 0:return[4,(0,this.props.dispatchEvent)("tab-change",{key:e})];case 1:return(null==(t=a.sent())?void 0:t.prevented)||this.setState({activeKey:e}),[2]}})})},t.prototype.handleTabSearch=function(e,t,a){return(0,n.__awaiter)(this,void 0,void 0,function(){var i,s,l,d,u,c,h,_,v,m,y;return(0,n.__generator)(this,function(n){switch(n.label){case 0:if(i=this.props,s=i.options,l=i.labelField,d=i.valueField,u=i.env,c=i.data,h=i.searchApi,_=i.translate,!h)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,u.fetcher(h,(0,r.ed2)(c,{term:e}),{cancelExecutor:a})];case 2:if(!(v=n.sent()).ok)throw new Error(_(v.msg||"networkError"));if(m=v.data.options||v.data.items||v.data,!Array.isArray(m))throw new Error(_("CRUD.invalidArray"));return[2,m.map(function(e){var t=null,a=e[d||"value"];return Array.isArray(s)&&null!=a&&(t=o()(s,(0,r.UjQ)(a,d))),t||e})];case 3:return y=n.sent(),u.isCancel(y)||!h.silent&&u.notify("error",y.message),[2,[]];case 4:return[3,6];case 5:return e?[2,(0,r.hVz)(t.children||s,function(t,a,n,r){return!!(Array.isArray(t.children)&&t.children.length||(0,p.matchSorter)([t].concat(r),e,{keys:[l||"label",d||"value"],threshold:p.matchSorter.rankings.CONTAINS}).length)},0,!0)]:[2,s];case 6:return[2]}})})},t.prototype.handleChange=function(e,t){return(0,n.__awaiter)(this,void 0,void 0,function(){var a,i,s,o,l,d,u,c,p,h,_,v,m,y;return(0,n.__generator)(this,function(g){switch(g.label){case 0:return a=this.props,i=a.onChange,s=a.joinValues,o=a.delimiter,l=a.valueField,d=a.extractValue,u=a.options,c=a.dispatchEvent,p=a.setOptions,h=a.translate,_=e,v=u.concat(),m="UN_MATCH_RESULT",Array.isArray(e)?(_=e.map(function(e){var a=(0,r.iXH)(u,(0,r.UjQ)(e[l||"value"],l||"value"));if(a){if(t){var i=(0,r.Jvj)(v,a);v=(0,r.Z6D)(v,a,1,(0,n.__assign)((0,n.__assign)({},i),e))}}else{var o=(0,r.iXH)(v,function(e){return e.value===m});if(o){var c=(0,r.Jvj)(v,o);(null==c?void 0:c.children)&&(c.children.push(e),v=(0,r.Z6D)(v,o,1,(0,n.__assign)((0,n.__assign)({},c),e)))}else v.push({label:h("searchResult"),value:m,visible:!1,children:[e]})}return s||d?e[l||"value"]:e}),s&&(_=_.join(o||","))):e&&(_=s||d?e[l||"value"]:e),(v.length>u.length||t)&&p(v,!0),[4,c("change",(0,r.RKM)(this.props,{value:_,options:u,items:u}))];case 1:return(null==(y=g.sent())?void 0:y.prevented)||i(_),[2]}})})},(0,n.__decorate)([r.d6t,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Number]),(0,n.__metadata)("design:returntype",Promise)],t.prototype,"onTabChange",null),(0,n.__decorate)([r.d6t,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[String,Object,Function]),(0,n.__metadata)("design:returntype",Promise)],t.prototype,"handleTabSearch",null),(0,n.__decorate)([r.d6t,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Boolean]),(0,n.__metadata)("design:returntype",Promise)],t.prototype,"handleChange",null),t}(d.BaseTransferRenderer),_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.__extends)(t,e),t.prototype.optionItemRender=function(e,t){var a=this.props,i=a.menuTpl,s=a.render,o=a.data,l=a.classnames,d=arguments[2]||{};return i?s("item/".concat(t.index),i,{data:(0,r.ed2)((0,r.ed2)(o,(0,n.__assign)((0,n.__assign)({},t),d)),e)}):u.qZ.itemRender(e,(0,n.__assign)((0,n.__assign)({},t),{classnames:l}))},t.prototype.doAction=function(e,t,a,n){var i,s,o;void 0===a&&(a=!1);var l=this.props,d=l.resetValue,u=l.onChange,c=l.formStore,p=l.store,h=l.name,_=null==n?void 0:n.activeKey;switch(e.actionType){case"clear":null==u||u("");break;case"reset":null==u||u(null!==(o=null!==(s=(0,r.dnO)(null!==(i=null==c?void 0:c.pristine)&&void 0!==i?i:null==p?void 0:p.pristine,h))&&void 0!==s?s:d)&&void 0!==o?o:"");break;case"changeTabKey":this.setState({activeKey:_})}},t.prototype.render=function(){var e=this.props,t=e.className,a=(e.style,e.classnames),n=e.options,s=e.selectedOptions,o=e.sortable,d=e.loading,u=e.searchResultMode,c=e.selectMode,p=e.searchable,h=e.showArrow,_=e.deferLoad,v=e.leftDeferLoad,m=e.disabled,y=e.selectTitle,g=e.resultTitle,f=e.itemHeight,b=e.virtualThreshold,T=e.onlyChildren,C=e.loadingConfig,w=e.valueField,R=void 0===w?"value":w,A=e.labelField,F=void 0===A?"label":A,k=e.valueTpl,S=e.menuTpl,E=e.data,I=e.mobileUI,j=e.initiallyOpen,O=void 0===j||j,K=e.testIdBuilder;return i.createElement("div",{className:a("TabsTransferControl",t)},i.createElement(l.uX,{onlyChildren:T,activeKey:this.state.activeKey,value:s,disabled:m,options:n,onChange:this.handleChange,option2value:this.option2value,sortable:o,searchResultMode:u,onSearch:this.handleTabSearch,showArrow:h,onDeferLoad:_,onLeftDeferLoad:v,selectTitle:y,resultTitle:g,selectMode:c,searchable:p,optionItemRender:S?this.optionItemRender:void 0,resultItemRender:k?this.resultItemRender:void 0,onTabChange:this.onTabChange,itemHeight:(0,r.Roz)(f)>0?(0,r.Roz)(f):void 0,virtualThreshold:b,labelField:F,valueField:R,ctx:E,mobileUI:I,initiallyOpen:O,testIdBuilder:K}),i.createElement(l.y$,{overlay:!0,key:"info",show:d,loadingConfig:C}))},t.defaultProps={multiple:!0},(0,n.__decorate)([r.d6t,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"optionItemRender",null),(0,n.__decorate)([(0,c.E)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[]),(0,n.__metadata)("design:returntype",void 0)],t.prototype,"render",null),(0,n.__decorate)([(0,r.QqA)({type:"tabs-transfer"})],t)}(h)}}]);