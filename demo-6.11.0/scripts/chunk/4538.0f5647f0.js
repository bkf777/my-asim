(self.webpackChunkamis_editor_demo=self.webpackChunkamis_editor_demo||[]).push([[4538],{6048:function(e){e.exports=function(e){if("function"!=typeof e)throw new TypeError("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}},34538:function(e,t,a){"use strict";a.r(t),a.d(t,{CRUD2Renderer:function(){return A},default:function(){return C}});var o=a(31635),r=a(96540),n=a(40961),i=a(42194),s=a.n(i),l=a(44383),d=a.n(l),c=a(24713),u=a.n(c),p=a(55808),h=a.n(p),m=a(5917),g=a(71086),y=a.n(g),f=a(25627),v=a(11331),_=a.n(v),b=a(62193),P=a.n(b),S=["selectedChange","columnSort","columnFilter","columnSearch","columnToggled","orderChange","rowClick","rowDbClick","rowMouseEnter","rowMouseLeave","selected"],C=function(e){function t(t){var a=e.call(this,t)||this;a.stopingAutoRefresh=!1;var o=t.location,r=t.store,n=t.syncLocation,i=t.pageField,s=t.perPageField,l=(t.parsePrimitiveQuery,a.getParseQueryOptions(t));a.mounted=!0,n&&o&&(o.query||o.search)?r.updateQuery((0,m.mAk)(o,l),void 0,i,s):n&&!o&&window.location.search&&r.updateQuery((0,m.mAk)(window.location,l),void 0,i,s),a.props.api&&a.props.store.updateData({items:[]});var d=t.mode,c=t.columns;return"table2"===d&&c&&r.updateColumns(c),a}return(0,o.__extends)(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.store,a=e.pickerMode,o=e.loadType,r=e.loadDataOnce,n=e.maxLoadNum;if(o&&!r){var i="more"===o?this.props.perPage||10:this.getPaginationPerPage();t.changePage(t.page,i)}else o||t.changePage(1,n||500);if(this.initQuery({}),a){var s=(0,m.$_G)(this.props);s&&t.setSelectedItems(s)}},t.prototype.componentDidUpdate=function(e){var t,a,o=this.props,r=e.store;o.parsePrimitiveQuery,e.columns!==o.columns&&r.updateColumns(o.columns),this.props.pickerMode&&(0,m.Kbh)(a=(0,m.$_G)(this.props),(0,m.$_G)(e))&&r.setSelectedItems(a);var n=!1;if(e.syncLocation&&e.location&&e.location.search!==o.location.search&&(r.updateQuery((0,m.mAk)(o.location,this.getParseQueryOptions(o)),void 0,o.pageField,o.perPageField),n=!(!o.api||!(0,m.JQ)(r.query,this.lastQuery,!1))),n);else if(e.api&&o.api&&(0,m.B92)(e.api,o.api,r.fetchCtxOf(e.data,{pageField:e.pageField,perPageField:e.perPageField}),r.fetchCtxOf(o.data,{pageField:o.pageField,perPageField:o.perPageField})))n=!0;else if(!o.api&&(0,m.joH)(o.source)){var i=(0,m.GvO)(o.source,o.data,"| raw");this.lastData&&this.lastData===i||(r.initFromScope(o.data,o.source,{columns:null!==(t=r.columns)&&void 0!==t?t:o.columns}),this.lastData=i)}n&&this.getData()},t.prototype.componentWillUnmount=function(){this.mounted=!1,clearTimeout(this.timer)},t.prototype.getPaginationPerPage=function(){var e=10,t=this.props,a=t.headerToolbar,o=t.footerToolbar;return(0,m.tiK)({headerToolbar:a,footerToolbar:o},function(t,a,o){"type"!==a||"pagination"!==t||isNaN(null==o?void 0:o.perPage)||(e=+o.perPage)}),e},t.prototype.getParseQueryOptions=function(e){var t,a=e.parsePrimitiveQuery;return{parsePrimitive:!!((0,m.Gvm)(a)?null==a?void 0:a.enable:a),primitiveTypes:null!==(t=null==a?void 0:a.types)&&void 0!==t?t:["boolean"]}},t.prototype.controlRef=function(e){for(;e&&e.getWrappedInstance;)e=e.getWrappedInstance();this.control=e},t.prototype.initQuery=function(e){var t=this.props,a=t.store,r=t.orderBy,n=t.orderDir,i=t.loadType,s={};r&&(s.orderBy=r,s.orderDir=n||"asc"),this.handleSearch({query:(0,o.__assign)((0,o.__assign)((0,o.__assign)({},s),e),a.query),replaceQuery:!1!==this.props.initFetch,loadMore:"more"===i,resetPage:!1}),a.setPristineQuery()},t.prototype.handleLoadMore=function(){var e=this.props,t=e.store,a=e.perPage,o=void 0===a?10:a;t.changePage(t.page+1,o),this.getData(void 0,void 0,void 0,!0)},t.prototype.handleSearch=function(e){var t,a,r=this.props,n=r.store,i=r.syncLocation,s=r.env,l=r.pageField,d=r.perPageField,c=r.parsePrimitiveQuery,u=this.getParseQueryOptions(this.props),p=e||{},h=p.query,g=p.resetQuery,f=p.replaceQuery,v=p.loadMore,_=p.resetPage;h=(0,o.__assign)((0,o.__assign)({},h),y()(null!==(a=null===(t=null==h?void 0:h.__super)||void 0===t?void 0:t.diff)&&void 0!==a?a:{},function(e){return void 0===e})),h=i?(0,m.gji)((0,m.Eqn)(h,void 0,!0)):h,c&&(h=(0,m.kCf)(h,u)),n.updateQuery(g?(0,o.__assign)((0,o.__assign)({},h),this.props.store.pristineQuery):h,i&&s&&s.updateLocation?function(e){return s.updateLocation(e,!0)}:void 0,l,d,f),_&&n.changePage(1),this.lastQuery=n.query,this.getData(void 0,void 0,void 0,null!=v&&v)},t.prototype.handleStopAutoRefresh=function(){this.timer&&clearTimeout(this.timer),this.stopingAutoRefresh=!0},t.prototype.handleStartAutoRefresh=function(){this.stopingAutoRefresh=!1,this.reload()},t.prototype.reloadTarget=function(e,t){},t.prototype.closeTarget=function(e){},t.prototype.updateQuery=function(e){void 0===e&&(e={}),this.props.store},t.prototype.getData=function(e,t,a,r){var n,i,s;return void 0===a&&(a=!1),(0,o.__awaiter)(this,void 0,void 0,function(){var l,d,c,u,p,h,g,y,f,v,_,b,P,S,C,A,T,F,O,I,Q;return(0,o.__generator)(this,function(o){switch(o.label){case 0:return l=this.props,d=l.store,c=l.api,u=l.messages,p=l.pageField,h=l.perPageField,g=l.interval,y=l.stopAutoRefreshWhen,f=l.silentPolling,l.syncLocation,v=l.syncResponse2Query,_=l.keepItemSelectionOnPageChange,b=l.stopAutoRefreshWhenModalIsOpen,P=l.pickerMode,l.env,S=l.loadType,C=l.loadDataOnce,A=l.source,T=l.columns,F=l.perPage,!r&&_&&t&&!P&&(d.setSelectedItems([]),d.setUnSelectedItems([])),clearTimeout(this.timer),this.lastQuery=d.query,O=null!=r?r:"more"===S,I=(0,m.ed2)(d.data,d.query),O&&F&&d.changePerPage(F),(0,m.Amo)(c,I)?[4,d.fetchInitData(c,I,{successMessage:u&&u.fetchSuccess,errorMessage:u&&u.fetchFailed,autoAppend:!0,forceReload:a,loadDataOnce:C,source:A,silent:e,pageField:p,perPageField:h,loadDataMode:O,syncResponse2Query:v,columns:null!==(n=d.columns)&&void 0!==n?n:T,isTable2:!0})]:[3,2];case 1:return(null==(Q=o.sent())?void 0:Q.ok)&&g&&!this.stopingAutoRefresh&&this.mounted&&(!y||!y||!(0,m.pgu)(y,(0,m.ed2)(d.data,d.query)))&&(!b||!d.dialogOpen&&!(null===(i=null==d?void 0:d.parentStore)||void 0===i?void 0:i.dialogOpen))&&(this.timer=setTimeout(this.getData.bind(this,f,void 0,!0),Math.max(g,1e3))),[3,3];case 2:A&&d.initFromScope(I,A,{columns:null!==(s=d.columns)&&void 0!==s?s:T}),o.label=3;case 3:return[2,d.data]}})})},t.prototype.handleChangePage=function(e,t){var a,o=this.props,r=o.store,i=o.syncLocation,s=o.env,l=o.pageField,d=o.perPageField,c=o.autoJumpToTopOnPagerChange,u=((a={})[l||"page"]=e,a);if(t&&(u[d||"perPage"]=t),r.updateQuery(u,i&&(null==s?void 0:s.updateLocation)?s.updateLocation:void 0,l,d),r.changePage(e,t),this.getData(),c&&this.control){(0,n.findDOMNode)(this.control).scrollIntoView();var p=window.scrollY;p&&window.scroll(0,p)}},t.prototype.handleSave=function(e,t,a,o,r,n){var i=this,s=this.props,l=s.store,d=s.quickSaveApi,c=s.quickSaveItemApi,u=s.primaryField,p=s.env,h=s.messages,g=s.reload;if(Array.isArray(e)){if(!(0,m.Amo)(d))return void(p&&p.alert("CRUD quickSaveApi is required"));var y=(0,m.ed2)(l.data,{rows:e,rowsDiff:t,indexes:a,rowsOrigin:r});e.length&&e[0].hasOwnProperty(u||"id")&&(y.ids=e.map(function(e){return e[u||"id"]}).join(",")),o&&(y.unModifiedItems=o),l.saveRemote(d,y,{successMessage:h&&h.saveFailed,errorMessage:h&&h.saveSuccess}).then(function(){g&&i.reloadTarget((0,m.Wvn)(g,y),y),i.getData(void 0,void 0,!0)}).catch(function(){})}else{if(!(0,m.Amo)(c))return void(p&&p.alert("CRUD quickSaveItemApi is required!"));var f=(0,m.ed2)(l.data,{item:e,modified:t,origin:r}),v=(0,m.ed2)(f,e);l.saveRemote(c,v).then(function(){g&&i.reloadTarget((0,m.Wvn)(g,f),f),i.getData(void 0,void 0,!0)}).catch(function(){(null==n?void 0:n.resetOnFailed)&&i.control.reset()})}},t.prototype.handleSaveOrder=function(e,t){var a=this,o=this.props,r=o.store,n=o.saveOrderApi,i=o.orderField,s=o.primaryField,l=o.env,c=o.reload;if(n){var u,p,h=(0,m.ed2)(r.data),g=[],y=s&&t[0]&&t[0].hasOwnProperty(s);if(y||(h.idMap={}),h.insertAfter={},t.forEach(function(a){if(~e.indexOf(a))if(u){var o=y?u[s]:t.indexOf(u);h.insertAfter[o]=h.insertAfter[o]||[],y||(h.idMap[o]=u),h.insertAfter[o].push(y?a[s]:a)}else g.push(a);else u=a,p=p||a}),p&&g.length){var f=y?p[s]:t.indexOf(p);y||(h.idMap[f]=p),h.insertBefore={},h.insertBefore[f]=g.map(function(e){return y?e[s]:e})}else if(g.length){var v=g[0],_=y?v[s]:t.indexOf(v);y||(h.idMap[_]=v),h.insertAfter[_]=g.slice(1).map(function(e){return y?e[s]:e})}if(i){var b=(r.page-1)*r.perPage||0;t=t.map(function(e,t){var a;return(0,m.C5M)(e,((a={})[i]=b+t+1,a))})}h.rows=t.concat(),y&&(h.ids=t.map(function(e){return e[s]}).join(",")),y&&i&&(h.order=t.map(function(e){return d()(e,[s,i])})),(0,m.Amo)(n,h)&&r.saveRemote(n,h).then(function(){c&&a.reloadTarget((0,m.Wvn)(c,h),h),a.getData(void 0,void 0,!0)}).catch(function(){})}else l&&l.alert("CRUD saveOrderApi is required!")},t.prototype.handleSelect=function(e,t){var a=this.props,o=a.store,r=a.keepItemSelectionOnPageChange,n=a.primaryField,i=a.multiple,s=a.pickerMode,l=a.onSelect,d=e,c=t;if((0,m.Kbh)(o.selectedItemsAsArray,d)){if(r&&o.selectedItems.length){var p=o.selectedItems.concat(),h=o.unSelectedItems.concat();e.forEach(function(e){var t=u()(p,function(t){return t===e||t[n||"id"]&&t[n||"id"]==e[n||"id"]});~t?p[t]=e:p.push(e);var a=u()(h,function(t){return t===e||t[n||"id"]&&t[n||"id"]==e[n||"id"]});~a&&h.splice(a,1)}),t.forEach(function(e){var t=u()(h,function(t){return t===e||t[n||"id"]&&t[n||"id"]==e[n||"id"]}),a=u()(p,function(t){return t===e||t[n||"id"]&&t[n||"id"]==e[n||"id"]});~t?h[t]=e:h.push(e),!~t&&~a&&p.splice(a,1)}),d=p,c=h}s&&!1===i&&d.length>1&&c.push.apply(c,d.splice(0,d.length-1)),o.setSelectedItems(d),o.setUnSelectedItems(c),l&&l(d)}},t.prototype.handleQuerySearch=function(e,t){var a;void 0===t&&(t=!1);var r=this.props,n=r.store,i=r.syncLocation,s=r.env,l=r.pageField,d=r.perPageField;return n.updateQuery((0,o.__assign)((0,o.__assign)({},e),((a={})[l||"page"]=1,a)),i&&s&&s.updateLocation?s.updateLocation:void 0,l,d),this.getData(void 0,void 0,t)},t.prototype.reload=function(e,t){return t?this.receive(t):this.getData(void 0,void 0,!0)},t.prototype.receive=function(e){return this.handleQuerySearch(e,!0)},t.prototype.doAction=function(e,t,a){if(void 0===a&&(a=!1),e.actionType&&["stopAutoRefresh","reload","search","startAutoRefresh","loadMore"].includes(e.actionType))return this["handle".concat(h()(e.actionType))](t)},t.prototype.handleAction=function(e,t,a,o,r){return void 0===o&&(o=!1),["stopAutoRefresh","reload","search","startAutoRefresh","loadMore"].includes(t.actionType)?this.doAction(t,a,o):this.props.onAction(e,t,a,o,r||this.context)},t.prototype.unSelectItem=function(e,t){var a=this.props.store,o=a.selectedItems.concat(),r=a.unSelectedItems.concat(),n=o.indexOf(e);~n&&r.push.apply(r,o.splice(n,1)),a.setSelectedItems(o),a.setUnSelectedItems(r)},t.prototype.clearSelection=function(){var e=this.props.store,t=e.selectedItems.concat(),a=e.unSelectedItems.concat();e.setSelectedItems([]),e.setUnSelectedItems(a.concat(t))},t.prototype.toggleAllColumns=function(e){var t=this.props.store;t.updateColumns(t.columns.map(function(t){return(0,o.__assign)((0,o.__assign)({},t),{toggled:e})}))},t.prototype.toggleToggle=function(e){var t=this.props.store,a=t.columns[e].toggled;t.updateColumns(t.columns.map(function(t,r){return(0,o.__assign)((0,o.__assign)({},t),{toggled:e===r?!a:!1!==t.toggled})}))},t.prototype.handlePullRefresh=function(){return(0,o.__awaiter)(this,void 0,void 0,function(){var e,t,a,r;return(0,o.__generator)(this,function(o){switch(o.label){case 0:return e=this.props,t=e.dispatchEvent,a=e.data,[4,t("pullRefresh",a)];case 1:return(null==(r=o.sent())?void 0:r.prevented)||this.handleLoadMore(),[2]}})})},t.prototype.renderChild=function(e,t,a){void 0===a&&(a={});var r,n=this.props,i=n.render,s=n.store,l=n.primaryField,d=void 0===l?"id":l,c=s.selectedItems,u=s.unSelectedItems,p=s.items;r=/^filter/.test(e)?(0,m.ed2)((0,m.ed2)(s.filterData,s.getData(this.props.data)),{}):(0,m.ed2)(s.mergedData,{items:p.concat(),selectedItems:c.concat(),unSelectedItems:u.concat(),ids:c.map(function(e){return e.hasOwnProperty(d)?e[d]:null}).filter(function(e){return e}).join(",")});var h={activePage:s.page,lastPage:s.lastPage,perPage:s.perPage,total:s.total,onPageChange:this.handleChangePage,cols:s.columns,toggleAllColumns:this.toggleAllColumns,toggleToggle:this.toggleToggle,onQuery:this.handleQuerySearch};return t.type,i(e,t,(0,o.__assign)((0,o.__assign)({data:r},a),h))},t.prototype.renderToolbar=function(e,t){var a=this;return t?(t=[].concat(t)).map(function(t,o){return a.renderChild("".concat(e,"/").concat(o),t,{key:o+""})}):null},t.prototype.renderFilter=function(e){var t=this;if(!e||Array.isArray(e)&&0===e.length)return null;var a=Array.isArray(e)?e:(0,m.Gvm)(e)&&null!=e.type?[e]:[];return a.length<1?null:a.map(function(e,a){return t.renderChild("filter/".concat(a),e,(0,o.__assign)({key:a+"filter",data:t.props.store.filterData,onSubmit:function(e){return t.handleSearch({query:e,resetPage:!0})},onReset:function(e){var a={};Object.keys(e).forEach(function(e){return a[e]=""}),t.handleSearch({query:a,resetQuery:!0,replaceQuery:!0,resetPage:!0})}},t.props.mobileUI?{columnCount:1,mode:"normal",collapsible:!0,title:{type:"container",body:[{type:"icon",icon:"column-filter",className:"icon mr-2"},e.title||""]}}:{}))})},t.prototype.renderSelection=function(){var e=this,t=this.props,a=t.store,o=t.classnames,n=t.labelField,i=t.labelTpl,s=t.primaryField,l=t.translate,d=t.env;return a.selectedItems.length?r.createElement("div",{className:o("Crud-selection")},r.createElement("div",{className:o("Crud-selectionLabel")},l("CRUD.selected",{total:a.selectedItems.length})),a.selectedItems.map(function(t,a){return r.createElement("div",{key:a,className:o("Crud-value")},r.createElement("span",{"data-tooltip":l("delete"),"data-position":"bottom",className:o("Crud-valueIcon"),onClick:e.unSelectItem.bind(e,t,a)},"×"),r.createElement("span",{className:o("Crud-valueLabel")},i?r.createElement(f.Ed,{html:(0,m.pbD)(i,t),filterHtml:d.filterHtml}):(0,m.dnO)(t,n||"label")||(0,m.dnO)(t,s||"id")))}),r.createElement("a",{onClick:this.clearSelection.bind(this),className:o("Crud-selectionClear")},l("clear"))):null},t.prototype.transformTable2cards=function(){for(var e,t=this.props,a=t.store,r=t.columns,n=t.card,i=[],s=t.mobileMode.fieldCount||4,l=[],d="",c=(null!==(e=a.columns)&&void 0!==e?e:r)||[],u=0;u<c.length;u++){var p=c[u];if(_()(p))if("operation"===p.type)l.push.apply(l,(0,o.__spreadArray)([],(0,o.__read)((null==p?void 0:p.buttons)||[]),!1));else if("button"===p.type&&"operation"===p.name)l.push(p);else{if(!p.label&&p.title&&(p.label=p.title),"static-image"===p.type&&!d){d="${".concat(p.name,"}");continue}i.length<s&&("static-image"===p.type&&p.title&&delete p.title,i.push(p))}}return i.length?{columnsCount:1,type:"cards",card:(0,o.__assign)((0,o.__assign)((0,o.__assign)({},n),{body:i,actions:l}),d?{media:{type:"image",url:d,position:"right",className:""},mediaActionPosition:"outside"}:{})}:null},t.prototype.transMobileHeaderToolbar=function(e,t){var a=0,o={},r={},n=null;function i(e,t){Array.isArray(e)?e.forEach(function(e){return i(e,t)}):e&&"object"==typeof e&&("button"===e.type?(a++,"新增"===e.label&&(o=e,r=t)):"search-box"===e.type&&(n=e),(e.items||e.body)&&i(e.items||e.body,e))}e.forEach(function(e){i(e)}),1===a&&o&&(o.label="",o.icon="plus",o.className||(o.className=""),o.className+=" is-fixed-right-bottom",r&&(r.className||(r.className=""),r.className+=" is-fixed-right-bottom-wrapper")),n&&(0===a||1===a&&o)&&P()(this.props.filterSchema)&&t()},t.prototype.render=function(){var e,t=this.props,a=t.columns,n=t.className,i=t.style,l=t.bodyClassName,d=t.filter,c=t.render,u=t.store,p=t.mode,h=void 0===p?"table2":p,m=(t.syncLocation,t.children,t.bulkActions,t.pickerMode),g=t.selectable,y=t.multiple,v=(t.valueField,t.primaryField),_=(t.value,t.hideQuickSaveBtn,t.itemActions),b=t.classnames,P=t.keepItemSelectionOnPageChange,C=t.maxKeepItemSelectionLength,A=t.onEvent,T=(t.onAction,t.popOverContainer),F=t.translate,O=(t.onQuery,t.autoGenerateFilter),I=(t.onSelect,t.autoFillHeight),Q=t.showSelection,k=t.headerToolbar,R=t.footerToolbar,D=(t.columnsTogglable,t.headerToolbarClassName),w=t.footerToolbarClassName,N=t.id,x=t.testIdBuilder,M=t.mobileMode,E=t.mobileUI,L=t.pullRefresh,q=(0,o.__rest)(t,["columns","className","style","bodyClassName","filter","render","store","mode","syncLocation","children","bulkActions","pickerMode","selectable","multiple","valueField","primaryField","value","hideQuickSaveBtn","itemActions","classnames","keepItemSelectionOnPageChange","maxKeepItemSelectionLength","onEvent","onAction","popOverContainer","translate","onQuery","autoGenerateFilter","onSelect","autoFillHeight","showSelection","headerToolbar","footerToolbar","columnsTogglable","headerToolbarClassName","footerToolbarClassName","id","testIdBuilder","mobileMode","mobileUI","pullRefresh"]),j=!1,B=null;if(M&&E&&h.includes("table")){var U=this.transformTable2cards();"string"==typeof M&&"cards"===M?U&&(B=U):"object"==typeof M&&(B=(0,o.__assign)((0,o.__assign)((0,o.__assign)({},U),M),{card:(0,o.__assign)((0,o.__assign)({},null==U?void 0:U.card),M.card)})),B&&this.transMobileHeaderToolbar(k,function(){j=!0}),B&&!(null==L?void 0:L.disabled)&&(e=(0,o.__assign)((0,o.__assign)({normalText:F("pullRefresh.crud2NormalText"),pullingText:F("pullRefresh.crud2PullingText"),loosingText:F("pullRefresh.crud2LoosingText")},L),{disabled:!1}))}else e=L;var W=c("body",(0,o.__assign)((0,o.__assign)((0,o.__assign)({},q),{onEvent:s()(A,function(e,t){return!S.includes(t)}),type:h,columns:h.startsWith("table")?u.columns||a:void 0,id:N}),B),{key:"body",className:b("Crud2-body",l),ref:this.controlRef,autoGenerateFilter:!d&&O,autoFillHeight:I,checkAll:!1,selectable:!!(null!=g?g:m),itemActions:_,multiple:y,columnsTogglable:!1,selected:m||P?u.selectedItemsAsArray:void 0,keepItemSelectionOnPageChange:P,maxKeepItemSelectionLength:C,primaryField:v,testIdBuilder:x,items:u.data.items,query:u.query,orderBy:u.query.orderBy,orderDir:u.query.orderDir,popOverContainer:T,onSave:this.handleSave.bind(this),onSaveOrder:this.handleSaveOrder,onSearch:this.handleQuerySearch,onSort:this.handleQuerySearch,onSelect:this.handleSelect,onAction:this.handleAction,data:u.mergedData,loading:u.loading,host:this});return r.createElement("div",(0,o.__assign)({className:b("Crud2",n,{"is-loading":u.loading,"is-mobile":E,"is-mobile-cards":"cards"===M||"cards"===(null==B?void 0:B.type)}),style:i,"data-id":N,"data-role":"container"},null==x?void 0:x.getTestId()),r.createElement("div",(0,o.__assign)({className:b("Crud2-filter")},null==x?void 0:x.getChild("filter").getTestId()),this.renderFilter(d)),r.createElement("div",{className:b("Crud2-toolbar","Crud2-header-toolbar",D,{"is-sticky":j})},this.renderToolbar("headerToolbar",k)),Q&&P&&!1!==y?this.renderSelection():null,E&&e&&!e.disabled?r.createElement(f.j5,(0,o.__assign)({},e,{translate:F,onRefresh:this.handlePullRefresh,direction:"up",loading:u.loading,completed:!u.loading&&u.lastPage>0&&u.page>=u.lastPage,completedText:u.total>0?void 0:""}),W):r.createElement(r.Fragment,null,W,r.createElement("div",{className:b("Crud2-toolbar","Crud2-footer-toolbar",w)},this.renderToolbar("footerToolbar",R))))},t.propsList=["mode","syncLocation","value","multiple","valueField","pageField","perPageField","hideQuickSaveBtn","autoJumpToTopOnPagerChange","interval","silentPolling","stopAutoRefreshWhen","stopAutoRefreshWhenModalIsOpen","api","headerToolbar","footerToolbar","autoGenerateFilter","syncResponse2Query","keepItemSelectionOnPageChange","source","onChange","onInit","onSaved","onQuery","autoFillHeight","showSelection","headerToolbarClassName","footerToolbarClassName","primaryField","parsePrimitiveQuery"],t.defaultProps={toolbarInline:!0,syncLocation:!0,hideQuickSaveBtn:!1,autoJumpToTopOnPagerChange:!0,silentPolling:!1,autoFillHeight:!1,showSelection:!0,primaryField:"id",parsePrimitiveQuery:!0},(0,o.__decorate)([m.d6t,(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[]),(0,o.__metadata)("design:returntype",void 0)],t.prototype,"getPaginationPerPage",null),(0,o.__decorate)([m.d6t,(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object]),(0,o.__metadata)("design:returntype",void 0)],t.prototype,"controlRef",null),(0,o.__decorate)([m.d6t,(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Number,Number]),(0,o.__metadata)("design:returntype",void 0)],t.prototype,"handleChangePage",null),(0,o.__decorate)([m.d6t,(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Array,Array]),(0,o.__metadata)("design:returntype",void 0)],t.prototype,"handleSaveOrder",null),(0,o.__decorate)([m.d6t,(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Array,Array]),(0,o.__metadata)("design:returntype",void 0)],t.prototype,"handleSelect",null),(0,o.__decorate)([m.d6t,(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],t.prototype,"handleQuerySearch",null),(0,o.__decorate)([m.d6t,(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],t.prototype,"doAction",null),(0,o.__decorate)([m.d6t,(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object,Object,Boolean,Object]),(0,o.__metadata)("design:returntype",void 0)],t.prototype,"handleAction",null),(0,o.__decorate)([m.d6t,(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Boolean]),(0,o.__metadata)("design:returntype",void 0)],t.prototype,"toggleAllColumns",null),(0,o.__decorate)([m.d6t,(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Number]),(0,o.__metadata)("design:returntype",void 0)],t.prototype,"toggleToggle",null),(0,o.__decorate)([m.d6t,(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[]),(0,o.__metadata)("design:returntype",Promise)],t.prototype,"handlePullRefresh",null),(0,o.__decorate)([m.d6t,(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[String,Object,Object]),(0,o.__metadata)("design:returntype",void 0)],t.prototype,"renderChild",null),t}(r.Component),A=function(e){function t(t,a){var o=e.call(this,t)||this;return a.registerComponent(o),o}return(0,o.__extends)(t,e),t.prototype.componentWillUnmount=function(){e.prototype.componentWillUnmount.call(this),this.context.unRegisterComponent(this)},t.prototype.reload=function(t,a,r){return(0,o.__awaiter)(this,void 0,void 0,function(){var n;return(0,o.__generator)(this,function(o){return n=this.context,t?[2,n.reload(a?"".concat(t,"?").concat((0,m.Eqn)(a)):t,r)]:[2,e.prototype.reload.call(this,t,a)]})})},t.prototype.receive=function(t,a){return(0,o.__awaiter)(this,void 0,void 0,function(){var r;return(0,o.__generator)(this,function(o){return r=this.context,a?[2,r.send(a,t)]:[2,e.prototype.receive.call(this,t)]})})},t.prototype.reloadTarget=function(e,t){this.context.reload(e,t)},t.prototype.closeTarget=function(e){this.context.close(e)},t.contextType=m.MzX,(0,o.__decorate)([(0,m.A49)({type:"crud2",storeType:m.wKF.name,isolateScope:!0}),(0,o.__metadata)("design:paramtypes",[Object,Object])],t)}(C)},42194:function(e,t,a){var o=a(15389),r=a(6048),n=a(71086);e.exports=function(e,t){return n(e,r(o(t)))}},71086:function(e,t,a){var o=a(34932),r=a(15389),n=a(97420),i=a(83349);e.exports=function(e,t){if(null==e)return{};var a=o(i(e),function(e){return[e]});return t=r(t),n(e,a,function(e,a){return t(e,a[0])})}}}]);