(self.webpackChunkamis_editor_demo=self.webpackChunkamis_editor_demo||[]).push([[5960],{55960:function(e,t,n){"use strict";n.r(t),n.d(t,{CascaderSelectControlRenderer:function(){return y},NestedSelectControlRenderer:function(){return v},default:function(){return g}});var a=n(31635),s=n(96540),i=n(25627),r=n(5917),o=n(40961),l=n(56625),d=n.n(l),c=n(80299),u=n.n(c),p=n(83673),h=n.n(p),m=n(66283),_=n(51545),g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.outTarget=s.createRef(),t.state={isOpened:!1,isFocused:!1,inputValue:"",stack:[t.props.options]},t}return(0,a.__extends)(t,e),t.prototype.domRef=function(e){this.target=e},t.prototype.componentDidUpdate=function(e){e.options!==this.props.options&&this.setState({stack:[this.props.options]})},t.prototype.doAction=function(e,t,n){var a,s,i=this.props,o=i.resetValue,l=i.onChange,d=i.formStore,c=i.store,u=i.name,p=null==e?void 0:e.actionType;if("clear"===p)null==l||l("");else if("reset"===p){var h=null!==(s=(0,r.dnO)(null!==(a=null==d?void 0:d.pristine)&&void 0!==a?a:null==c?void 0:c.pristine,u))&&void 0!==s?s:o;null==l||l(null!=h?h:"")}},t.prototype.dispatchEvent=function(e,t){return void 0===t&&(t={}),(0,a.__awaiter)(this,void 0,void 0,function(){var n,s,i,o,l,d,c;return(0,a.__generator)(this,function(u){switch(u.label){case 0:return n=this.props,s=n.dispatchEvent,i=n.options,o=n.multiple,l=n.value,d=n.selectedOptions,[4,s(e,(0,r.RKM)(this.props,(0,a.__assign)({options:i,items:i,value:l,selectedItems:o?d:d[0]},t)))];case 1:return[2,!!(null==(c=u.sent())?void 0:c.prevented)]}})})},t.prototype.isParentNode=function(e){return Array.isArray(e.children)&&e.children.length>0},t.prototype.handleOutClick=function(e){var t;e.stopPropagation(),this.outTargetWidth=null===(t=this.outTarget.current)||void 0===t?void 0:t.clientWidth,e.defaultPrevented||this.setState(function(e){return{isOpened:!e.isOpened}})},t.prototype.handleResultClear=function(){this.setState({inputValue:void 0})},t.prototype.close=function(){this.setState({isOpened:!1})},t.prototype.removeItem=function(e,t){return(0,a.__awaiter)(this,void 0,void 0,function(){var n,s,i,r;return(0,a.__generator)(this,function(a){switch(a.label){case 0:return n=this.props,s=n.onChange,i=n.selectedOptions,t&&t.stopPropagation(),i.splice(e,1),r=this.getValue(),[4,this.dispatchEvent("change",{value:r})];case 1:return a.sent()||s(r),[2]}})})},t.prototype.renderValue=function(e,t){var n=this.props,a=n.classnames,i=n.labelField,o=n.valueField,l=n.options,d=n.hideNodePathLabel,c=this.state.inputValue||"",u=(0,r.NhP)(c);if(d)return(0,r.dMh)(e[i||"label"]);var p=(0,r.fw2)(l,e,!0),h=(0,r.dMh)(e[i||"label"]),m=p?p.map(function(e){return(0,r.dMh)(e[i||"label"])}).join(" / "):h;return s.createElement("span",{className:a("Select-valueLabel"),key:t||e[o||"value"],title:m},p?p.map(function(e,t){var n=(0,r.dMh)(e[i||"label"]),a=e[o||"value"],l=t===p.length-1;return s.createElement("span",{key:t},u.test(a)||u.test(n)?(0,r.gGz)(n,c):n,!l&&" / ")}):h)},t.prototype.handleOptionClick=function(e){return(0,a.__awaiter)(this,void 0,void 0,function(){var t,n,s,i,r,o,l,d,c;return(0,a.__generator)(this,function(a){switch(a.label){case 0:return t=this.props,n=t.multiple,s=t.onChange,i=t.joinValues,r=t.extractValue,o=t.valueField,l=t.onlyLeaf,n||void 0===(d=i||r?e[o||"value"]:e)||l&&this.isParentNode(e)?[2]:[4,this.dispatchEvent("change",{value:d})];case 1:return(c=a.sent())||s(d),c||this.handleResultClear(),this.setState({stack:[this.props.options]}),this.close(),[2]}})})},t.prototype.handleCheck=function(e,t,n){return(0,a.__awaiter)(this,void 0,void 0,function(){var s,i,o,l,c,p,m,_,g,v,y,f,C,b,k,N,S,O,E,w,F;return(0,a.__generator)(this,function(a){switch(a.label){case 0:if(s=this.props,i=s.onChange,o=s.selectedOptions,l=s.joinValues,c=s.delimiter,p=s.extractValue,m=s.withChildren,_=s.onlyChildren,g=s.cascade,v=s.options,y=s.onlyLeaf,f=this.state.stack,C=this.props.valueField||"value",y&&!Array.isArray(e)&&this.isParentNode(e))return[2];if(!Array.isArray(e)&&e.children&&e.children.length&&"number"==typeof t&&(f[t]?f.splice(t+1,1,e.children):f.push(e.children)),b=o,N=function(e){return h()((0,r.dGY)(Array.isArray(e)?e:[e],function(e){return e.children&&e.children.length?null:e}))},Array.isArray(e)?(m?e=(0,r.dGY)(e):_&&(e=N(e)),k=b.length===e.length?[]:e):Array.isArray(e.children)?g?k=d()(b,[e]):m?(e=(0,r.dGY)([e]),S=e.every(function(e){return!!~b.indexOf(e)}),k=(S?d():u())(b,e)):_?(e=N(e),S=e.every(function(e){return!!~b.indexOf(e)}),k=(S?d():u())(b,e)):(k=b.filter(function(t){return!~(0,r.dGY)([e]).indexOf(t)}),!~b.indexOf(e)&&k.push(e)):k=d()(b,[e]),!g)for(O=e;(null==(E=(0,r.LUK)(v,O))?void 0:E.value)&&E.children.every(function(e){return~k.indexOf(e)});)E.children.forEach(function(e){var t=k.indexOf(e);!~t||m||_||k.splice(t,1)}),_||k.push(E),O=E;return w=l?k.map(function(e){return e[C]}).join(c):p?k.map(function(e){return e[C]}):k,[4,this.dispatchEvent("change",{value:w})];case 1:return(F=a.sent())||i(w),F||this.handleResultClear(),n&&this.setState({stack:[this.props.options]}),[2]}})})},t.prototype.allChecked=function(e){var t=this,n=this.props,a=n.selectedOptions,s=n.withChildren,i=n.onlyChildren;return e.every(function(e){return(s||i)&&e.children?t.allChecked(e.children):a.some(function(t){return t===e})})},t.prototype.partialChecked=function(e){var t=this;return e.some(function(e){return e.children&&t.partialChecked(e.children)||t.props.selectedOptions.some(function(t){return t===e})})},t.prototype.reload=function(){var e=this.props.reloadOptions;e&&e()},t.prototype.getValue=function(){var e=this.props,t=e.selectedOptions,n=e.joinValues,a=e.valueField,s=e.extractValue,i=e.delimiter,r=e.value;return n?r=t.map(function(e){return e[a||"value"]}).join(i||","):s&&(r=t.map(function(e){return e[a||"value"]})),r},t.prototype.onFocus=function(e){return(0,a.__awaiter)(this,void 0,void 0,function(){var t,n,s,i;return(0,a.__generator)(this,function(a){switch(a.label){case 0:return t=this.props,n=t.onFocus,s=t.disabled,i=this.getValue(),s||this.state.isOpened?[3,2]:(this.setState({isFocused:!0}),[4,this.dispatchEvent("focus",{value:i})]);case 1:a.sent()||n&&n(e),a.label=2;case 2:return[2]}})})},t.prototype.onBlur=function(e){return(0,a.__awaiter)(this,void 0,void 0,function(){var t,n;return(0,a.__generator)(this,function(a){switch(a.label){case 0:return t=this.props.onBlur,n=this.getValue(),this.setState({isFocused:!1}),[4,this.dispatchEvent("blur",{value:n})];case 1:return a.sent()||t&&t(e),[2]}})})},t.prototype.getTarget=function(){return this.target||(this.target=(0,o.findDOMNode)(this)),this.target},t.prototype.handleKeyPress=function(e){" "===e.key&&(this.handleOutClick(e),e.preventDefault())},t.prototype.handleInputKeyDown=function(e){var t=this.state.inputValue,n=this.props,a=n.multiple,s=n.selectedOptions;"Backspace"===e.key&&!t&&s.length&&a&&this.removeItem(s.length-1)},t.prototype.handleInputChange=function(e){var t=this.props,n=t.options,a=t.labelField,s=t.valueField,i=e&&this.state.isOpened?(0,r.hVz)(n,function(t,n,i,r){return!!(0,_.matchSorter)([t].concat(r),e,{keys:[a||"label",s||"value"],threshold:_.matchSorter.rankings.CONTAINS}).length||!(!t.children||!t.children.length)},1,!0):n.concat();this.setState({inputValue:e,stack:[i]})},t.prototype.handleResultChange=function(e){return(0,a.__awaiter)(this,void 0,void 0,function(){var t,n,s,i,r,o,l,d;return(0,a.__generator)(this,function(a){switch(a.label){case 0:return t=this.props,n=t.joinValues,s=t.extractValue,i=t.delimiter,r=t.valueField,o=t.onChange,l=t.multiple,d=Array.isArray(e)?e.concat():[],l||d.length?[3,2]:[4,this.dispatchEvent("change",{value:""})];case 1:return a.sent()||o(""),[2];case 2:return(n||s)&&(d=e.map(function(e){return e[r||"value"]})),n&&(d=d.join(i||",")),[4,this.dispatchEvent("change",{value:d})];case 3:return a.sent()||o(d),[2]}})})},t.prototype.getMenuSelectMenuStyle=function(){var e=this.props.options,t=this.outTargetWidth,n=(0,r.Ufp)(e),a={};return t&&(a={width:t/n}),a},t.prototype.renderOptions=function(){var e=this,t=this.props,n=t.multiple,o=t.selectedOptions,l=t.classnames,d=t.options,c=t.disabled,u=t.checkAll,p=t.checkAllLabel,h=t.translate,m=t.labelField,_=t.menuClassName,g=t.cascade,v=t.onlyChildren,y=t.testIdBuilder,f=this.props.valueField||"value",C=this.state.stack,b=this.partialChecked(d),k=this.allChecked(d);return s.createElement(s.Fragment,null,C.map(function(t,C){return s.createElement("div",{key:C,className:l("NestedSelect-menu",_),style:e.getMenuSelectMenuStyle()},n&&u&&0===C?s.createElement("div",{className:l("NestedSelect-option","checkall")},s.createElement(i.Sc,{size:"sm",onChange:e.handleCheck.bind(e,t),checked:b,partial:b&&!k}),s.createElement("span",{onClick:e.handleCheck.bind(e,t)},h(p))):null,t.map(function(t,u){var p=null==y?void 0:y.getChild("menu-".concat(C)).getChild(t.value||u),h=(0,r.fw2)(d,t),_=null==h?void 0:h.some(function(e){return!!~o.indexOf(e)}),b=!g&&n&&_,k=null==h?void 0:h.some(function(e){return!!e.disabled}),N=b||t.disabled||k||!!c,S=!(!t.children||!e.partialChecked(t.children)),O=b||!!~o.indexOf(t);!O&&v&&n&&e.isParentNode(t)&&e.allChecked(t.children)&&(O=!0);var E=(0,r.dMh)(t[m||"label"]);return s.createElement("div",{key:u,className:l("NestedSelect-option",{"is-active":!N&&(O||!g&&S)}),onMouseEnter:e.onMouseEnter.bind(e,t,C)},n?s.createElement(i.Sc,{size:"sm",onChange:e.handleCheck.bind(e,t,C,!1),trueValue:t[f],checked:O||!g&&S,partial:!O,disabled:N,testIdBuilder:null==p?void 0:p.getChild("checkbox")}):null,s.createElement("div",(0,a.__assign)({className:l("NestedSelect-optionLabel",{"is-disabled":N}),onClick:function(){return!N&&(n?e.handleCheck(t,C):e.handleOptionClick(t))},title:E},null==p?void 0:p.getTestId()),E),t.children&&t.children.length?s.createElement("div",(0,a.__assign)({className:l("NestedSelect-optionArrowRight",{"is-disabled":N})},null==p?void 0:p.getChild("arrow-right").getTestId()),s.createElement(i.In,{icon:"right-arrow-bold",className:"icon"})):null)}))}))},t.prototype.renderSearchResult=function(){var e=this,t=this.state,n=t.stack,a=t.inputValue,i=this.props,o=i.classnames,l=i.translate,d=i.options,c=i.labelField,u=i.valueField,p=i.cascade,h=i.selectedOptions,m=i.multiple,_=i.disabled,g=i.onlyChildren,v=i.render,y=this.props.noResultsText;y&&(y=v("noResultText",l(y)));var f=(0,r.NhP)(a||""),C=(0,r.dGY)(n[0]).filter(function(e){return!(!f.test(e[u||"value"])&&!f.test(e[c||"label"]))});return s.createElement("div",{className:o("NestedSelect-menu"),style:this.getMenuSelectMenuStyle()},C.length?C.map(function(t,n){var a=(0,r.fw2)(d,t),i=!p&&m&&(null==a?void 0:a.some(function(e){return!!~h.indexOf(e)})),l=i||t.disabled||!!_||(null==a?void 0:a.some(function(e){return!!e.disabled})),c=!(!t.children||!e.partialChecked(t.children)),u=i||!!~h.indexOf(t);return!u&&g&&e.isParentNode(t)&&e.allChecked(t.children)&&(u=!0),s.createElement("div",{className:o("NestedSelect-option",{"is-active":!l&&(u||!p&&c)}),key:n},s.createElement("div",{className:o("NestedSelect-optionLabel",{"is-disabled":l}),onClick:function(){!l&&(m?e.handleCheck(t,t.value,!0):e.handleOptionClick(t))}},e.renderValue(t,t.value)))}):s.createElement("div",{className:o("NestedSelect-option",{"no-result":!0})},y))},t.prototype.onMouseEnter=function(e,t,n){var a=this.state.stack;t+=1;var s=e.children;s&&s.length?a[t]?a.splice(t,1,s):a.push(s):a[t]&&a.splice(t,1),this.setState({stack:a.slice(0,t+1)})},t.prototype.renderOuter=function(){var e=this,t=this.props,n=t.popOverContainer,i=t.translate,l=t.classnames,d=t.options,c=t.render,u=t.id,p=t.themeCss,h=!!this.state.inputValue,m=this.props.noResultsText;m&&(m=c("noResultText",i(m)));var _=s.createElement(r.HSu,{disabled:!this.state.isOpened,onRootClose:this.close},function(t){return s.createElement("div",{className:l("NestedSelect-menuOuter"),ref:t},h?e.renderSearchResult():d.length?e.renderOptions():s.createElement("div",{className:l("NestedSelect-noResult")},m))});return s.createElement(r.hJs,{target:this.getTarget,container:n||function(){return(0,o.findDOMNode)(e)},placement:"auto",show:!0},s.createElement(r.Kx3,{className:l("NestedSelect-popover",(0,r.NH8)((0,a.__assign)((0,a.__assign)({},this.props),{name:"nestedSelectPopoverClassName",id:u,themeCss:p})))},_))},t.prototype.render=function(){var e,t=this.props,n=t.className,o=t.style,l=t.disabled,d=t.classnames,c=t.multiple,u=t.placeholder,p=t.translate,h=t.inline,m=t.searchable,_=t.selectedOptions,g=t.clearable,v=t.loading,y=t.borderMode,f=t.mobileUI,C=(t.popOverContainer,t.env),b=t.testIdBuilder,k=t.loadingConfig,N=t.maxTagCount,S=t.overflowTagPopover,O=this.props,E=O.classPrefix,w=O.themeCss,F=O.id;return s.createElement("div",{className:d("NestedSelectControl",n),ref:this.outTarget,style:o},s.createElement(i.dM,{mobileUI:f,maxTagCount:N,overflowTagPopover:S,disabled:l,ref:this.domRef,placeholder:p(null!=u?u:"placeholder.empty"),inputPlaceholder:"",className:d("NestedSelect",(e={"NestedSelect--inline":h,"NestedSelect--single":!c,"NestedSelect--multi":c,"NestedSelect--searchable":m,"is-opened":this.state.isOpened,"is-focused":this.state.isFocused},e["NestedSelect--border".concat((0,r.TF7)(y))]=y,e),(0,r.NH8)((0,a.__assign)((0,a.__assign)({},this.props),{name:"nestedSelectControlClassName",id:F,themeCss:w}))),result:c?_:_.length?_[0]:"",onResultClick:this.handleOutClick,value:this.state.inputValue,onChange:this.handleInputChange,onResultChange:this.handleResultChange,onClear:this.handleResultClear,itemRender:this.renderValue,onKeyPress:this.handleKeyPress,onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.handleInputKeyDown,clearable:g,hasDropDownArrow:!0,allowInput:m&&!f,testIdBuilder:b},v?s.createElement(i.y$,{loadingConfig:k,size:"sm"}):void 0),f?s.createElement(i.HH,{className:d("NestedSelect-popup"),container:C.getModalContainer,isShow:this.state.isOpened,onHide:this.close,showConfirm:!1,showClose:!1},s.createElement(i.vx,(0,a.__assign)({onClose:this.close},this.props,{onChange:this.handleResultChange,options:this.props.options.slice(),value:_}))):this.state.isOpened?this.renderOuter():null,s.createElement(r.z4D,(0,a.__assign)({},this.props,{config:{themeCss:w,classNames:[{key:"nestedSelectControlClassName",weights:{hover:{suf:".is-clickable:not(.is-disabled)"},focused:{suf:".is-opened:not(.is-mobile)"},disabled:{suf:".is-disabled"}}},{key:"nestedSelectPopoverClassName",weights:{default:{suf:" .".concat(E,"NestedSelect-option")},hover:{suf:" .".concat(E,"NestedSelect-option.is-highlight")},focused:{inner:".".concat(E,"NestedSelect-option.is-active")}}}],id:F},env:C})))},t.defaultProps={cascade:!1,withChildren:!1,onlyChildren:!1,onlyLeaf:!1,searchPromptText:"Select.searchPromptText",noResultsText:"noResult",checkAll:!0,checkAllLabel:"Select.checkAll",hideNodePathLabel:!1},(0,a.__decorate)([r.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object]),(0,a.__metadata)("design:returntype",void 0)],t.prototype,"domRef",null),(0,a.__decorate)([r.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[String,Object]),(0,a.__metadata)("design:returntype",Promise)],t.prototype,"dispatchEvent",null),(0,a.__decorate)([r.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object]),(0,a.__metadata)("design:returntype",void 0)],t.prototype,"handleOutClick",null),(0,a.__decorate)([r.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",void 0)],t.prototype,"handleResultClear",null),(0,a.__decorate)([r.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",void 0)],t.prototype,"close",null),(0,a.__decorate)([r.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Object]),(0,a.__metadata)("design:returntype",void 0)],t.prototype,"renderValue",null),(0,a.__decorate)([r.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object]),(0,a.__metadata)("design:returntype",Promise)],t.prototype,"handleOptionClick",null),(0,a.__decorate)([r.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Number,Boolean]),(0,a.__metadata)("design:returntype",Promise)],t.prototype,"handleCheck",null),(0,a.__decorate)([r.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",void 0)],t.prototype,"getValue",null),(0,a.__decorate)([r.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object]),(0,a.__metadata)("design:returntype",Promise)],t.prototype,"onFocus",null),(0,a.__decorate)([r.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object]),(0,a.__metadata)("design:returntype",Promise)],t.prototype,"onBlur",null),(0,a.__decorate)([r.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",void 0)],t.prototype,"getTarget",null),(0,a.__decorate)([r.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object]),(0,a.__metadata)("design:returntype",void 0)],t.prototype,"handleKeyPress",null),(0,a.__decorate)([r.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object]),(0,a.__metadata)("design:returntype",void 0)],t.prototype,"handleInputKeyDown",null),(0,a.__decorate)([r.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[String]),(0,a.__metadata)("design:returntype",void 0)],t.prototype,"handleInputChange",null),(0,a.__decorate)([r.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Array]),(0,a.__metadata)("design:returntype",Promise)],t.prototype,"handleResultChange",null),(0,a.__decorate)([r.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",void 0)],t.prototype,"getMenuSelectMenuStyle",null),(0,a.__decorate)([(0,m.E)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",void 0)],t.prototype,"render",null),t}(s.Component),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,a.__extends)(t,e),(0,a.__decorate)([(0,r.QqA)({type:"nested-select"})],t)}(g),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,a.__extends)(t,e),(0,a.__decorate)([(0,r.QqA)({type:"cascader-select"})],t)}(g)},80299:function(e,t,n){var a=n(83120),s=n(69302),i=n(55765),r=n(83693),o=s(function(e){return i(a(e,1,r,!0))});e.exports=o}}]);