"use strict";(self.webpackChunkamis_editor_demo=self.webpackChunkamis_editor_demo||[]).push([[802],{10802:function(t,e,a){a.r(e),a.d(e,{Audio:function(){return u},AudioRenderer:function(){return p}});var n=a(31635),o=a(96540),i=a(55808),s=a.n(i),r=a(5917),d=a(25627),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={src:(0,r.$_G)(e.props,function(t){return t.src?(0,r.pbD)(t.src,t.data,"| raw"):void 0})||"",isReady:!1,muted:!1,playing:!1,played:0,seeking:!1,volume:.8,prevVolume:.8,loaded:0,playbackRate:1,showHandlePlaybackRate:!1,showHandleVolume:!1},e}return(0,n.__extends)(e,t),e.prototype.componentWillUnmount=function(){clearTimeout(this.progressTimeout),clearTimeout(this.durationTimeout)},e.prototype.componentDidMount=function(){var t=!!this.props.autoPlay;this.setState({playing:t},this.progress)},e.prototype.componentDidUpdate=function(t){var e=this,a=this.props;(0,r.gTD)(a,t,function(t){return e.setState({src:t,playing:!1},function(){e.audio.load(),e.progress()})},function(t){return t.src?(0,r.pbD)(t.src,t.data,"| raw"):void 0})},e.prototype.progress=function(){if(clearTimeout(this.progressTimeout),this.state.src&&this.audio){var t=(this.audio.currentTime||0)/this.audio.duration,e=this.state.playing;e=!(1==t||!e),this.setState({played:t,playing:e}),this.progressTimeout=setTimeout(this.progress,this.props.progressInterval/this.state.playbackRate)}},e.prototype.audioRef=function(t){this.audio=t},e.prototype.load=function(){this.setState({isReady:!0})},e.prototype.handlePlaybackRate=function(t){this.audio.playbackRate=t,this.setState({playbackRate:t,showHandlePlaybackRate:!1})},e.prototype.handleMute=function(){if(this.state.src){var t=this.state,e=t.muted,a=t.prevVolume,n=e?a:0;this.audio.muted=!e,this.setState({muted:!e,volume:n})}},e.prototype.handlePlaying=function(){if(this.state.src){var t=this.state.playing;t?this.audio.pause():this.audio.play(),this.setState({playing:!t})}},e.prototype.getCurrentTime=function(){if(!this.audio||!this.state.src||!this.state.isReady)return"0:00";var t=this.audio.duration,e=this.state.played;return this.formatTime(t*(e||0))},e.prototype.getDuration=function(){if(!this.audio||!this.state.src)return"0:00";if(!this.state.isReady)return this.onDurationCheck(),"0:00";var t=this.audio,e=t.duration,a=t.seekable;return e===1/0&&a.length>0?a.end(a.length-1):this.formatTime(e)},e.prototype.onDurationCheck=function(){clearTimeout(this.durationTimeout),this.audio&&this.audio.duration||(this.durationTimeout=setTimeout(this.onDurationCheck,500))},e.prototype.onSeekChange=function(t){if(this.state.src){var e=t.target.value;this.setState({played:e})}},e.prototype.onSeekMouseDown=function(){this.setState({seeking:!0})},e.prototype.onSeekMouseUp=function(t){if(this.state.src&&this.state.seeking){var e=t.target.value,a=this.audio.duration;this.audio.currentTime=a*e;var n=this.props.loop,o=this.state.playing;o=!!(e<1||n)&&o,this.setState({playing:o,seeking:!1})}},e.prototype.setVolume=function(t){if(this.state.src){var e=t.target.value;this.audio.volume=e,this.setState({volume:e,prevVolume:e})}},e.prototype.formatTime=function(t){var e=new Date(1e3*t),a=e.getUTCHours(),n=isNaN(e.getUTCMinutes())?0:e.getUTCMinutes(),o=isNaN(e.getUTCSeconds())?"00":this.pad(e.getUTCSeconds());return a?"".concat(a,":").concat(this.pad(n),":").concat(o):"".concat(n,":").concat(o)},e.prototype.pad=function(t){return("0"+t).slice(-2)},e.prototype.toggleHandlePlaybackRate=function(){this.state.src&&this.setState({showHandlePlaybackRate:!this.state.showHandlePlaybackRate})},e.prototype.toggleHandleVolume=function(t){this.state.src&&this.setState({showHandleVolume:t})},e.prototype.renderRates=function(){var t=this,e=this.props,a=e.rates,n=e.classnames,i=this.state,s=i.showHandlePlaybackRate,r=i.playbackRate;return a&&a.length?s?o.createElement("div",{className:n("Audio-rateControl")},a.map(function(e,a){return o.createElement("div",{key:a,className:n("Audio-rateControlItem"),onClick:function(){return t.handlePlaybackRate(e)}},"x",e.toFixed(1))})):o.createElement("div",{className:n("Audio-rates"),onClick:this.toggleHandlePlaybackRate},"x",r.toFixed(1)):null},e.prototype.renderPlay=function(){var t=this.props.classnames,e=this.state.playing;return o.createElement("div",{className:t("Audio-play"),onClick:this.handlePlaying},e?o.createElement(d.In,{icon:"pause",className:"icon"}):o.createElement(d.In,{icon:"play",className:"icon"}))},e.prototype.renderTime=function(){var t=this.props.classnames;return o.createElement("div",{className:t("Audio-times")},this.getCurrentTime()," / ",this.getDuration())},e.prototype.renderProcess=function(){var t=this.props.classnames,e=this.state.played;return o.createElement("div",{className:t("Audio-process")},o.createElement("input",{type:"range",min:0,max:1,step:"any",value:e||0,onMouseDown:this.onSeekMouseDown,onChange:this.onSeekChange,onMouseUp:this.onSeekMouseUp}))},e.prototype.renderVolume=function(){var t=this,e=this.props.classnames,a=this.state,n=a.volume;return a.showHandleVolume?o.createElement("div",{className:e("Audio-volumeControl"),onMouseLeave:function(){return t.toggleHandleVolume(!1)}},o.createElement("div",{className:e("Audio-volumeControlIcon"),onClick:this.handleMute},n>0?o.createElement(d.In,{icon:"volume",className:"icon"}):o.createElement(d.In,{icon:"mute",className:"icon"})),o.createElement("input",{type:"range",min:0,max:1,step:"any",value:n,onChange:this.setVolume})):o.createElement("div",{className:e("Audio-volume"),onMouseEnter:function(){return t.toggleHandleVolume(!0)}},n>0?o.createElement(d.In,{icon:"volume",className:"icon"}):o.createElement(d.In,{icon:"mute",className:"icon"}))},e.prototype.render=function(){var t=this,e=this.props,a=e.className,n=e.style,i=e.inline,r=e.autoPlay,d=e.loop,u=e.controls,p=e.classnames,l=this.state,c=l.muted,m=l.src;return o.createElement("div",{className:p("Audio",a,i?"Audio--inline":""),style:n},o.createElement("audio",{className:p("Audio-original"),ref:this.audioRef,onCanPlay:this.load,autoPlay:r,controls:!0,muted:c,loop:d},o.createElement("source",{src:m})),o.createElement("div",{className:p("Audio-controls")},u&&u.map(function(e,a){var n=e="render"+s()(e);return o.createElement(o.Fragment,{key:a},t[n]())})))},e.defaultProps={inline:!0,autoPlay:!1,playbackRate:1,loop:!1,rates:[],progressInterval:1e3,controls:["rates","play","time","process","volume"]},(0,n.__decorate)([r.d6t,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[]),(0,n.__metadata)("design:returntype",void 0)],e.prototype,"progress",null),(0,n.__decorate)([r.d6t,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[HTMLMediaElement]),(0,n.__metadata)("design:returntype",void 0)],e.prototype,"audioRef",null),(0,n.__decorate)([r.d6t,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[]),(0,n.__metadata)("design:returntype",void 0)],e.prototype,"load",null),(0,n.__decorate)([r.d6t,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Number]),(0,n.__metadata)("design:returntype",void 0)],e.prototype,"handlePlaybackRate",null),(0,n.__decorate)([r.d6t,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[]),(0,n.__metadata)("design:returntype",void 0)],e.prototype,"handleMute",null),(0,n.__decorate)([r.d6t,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[]),(0,n.__metadata)("design:returntype",void 0)],e.prototype,"handlePlaying",null),(0,n.__decorate)([r.d6t,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[]),(0,n.__metadata)("design:returntype",void 0)],e.prototype,"getCurrentTime",null),(0,n.__decorate)([r.d6t,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[]),(0,n.__metadata)("design:returntype",void 0)],e.prototype,"getDuration",null),(0,n.__decorate)([r.d6t,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[]),(0,n.__metadata)("design:returntype",void 0)],e.prototype,"onDurationCheck",null),(0,n.__decorate)([r.d6t,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object]),(0,n.__metadata)("design:returntype",void 0)],e.prototype,"onSeekChange",null),(0,n.__decorate)([r.d6t,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[]),(0,n.__metadata)("design:returntype",void 0)],e.prototype,"onSeekMouseDown",null),(0,n.__decorate)([r.d6t,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object]),(0,n.__metadata)("design:returntype",void 0)],e.prototype,"onSeekMouseUp",null),(0,n.__decorate)([r.d6t,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object]),(0,n.__metadata)("design:returntype",void 0)],e.prototype,"setVolume",null),(0,n.__decorate)([r.d6t,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Number]),(0,n.__metadata)("design:returntype",void 0)],e.prototype,"formatTime",null),(0,n.__decorate)([r.d6t,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Number]),(0,n.__metadata)("design:returntype",void 0)],e.prototype,"pad",null),(0,n.__decorate)([r.d6t,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[]),(0,n.__metadata)("design:returntype",void 0)],e.prototype,"toggleHandlePlaybackRate",null),(0,n.__decorate)([r.d6t,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Boolean]),(0,n.__metadata)("design:returntype",void 0)],e.prototype,"toggleHandleVolume",null),e}(o.Component),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,n.__extends)(e,t),(0,n.__decorate)([(0,r.A49)({type:"audio"})],e)}(u)}}]);