"use strict";(self.webpackChunkamis_editor_demo=self.webpackChunkamis_editor_demo||[]).push([[845],{70845:function(e,t,n){n.r(t),n.d(t,{Navigation:function(){return f},NavigationRenderer:function(){return m},default:function(){return g}});var a=n(31635),o=n(96540),i=n(40961),r=n(51545),d=n(2404),l=n.n(d),s=n(85015),c=n.n(s),p=n(88055),u=n.n(p),v=n(5917),h=n(25627),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startPoint={y:0,x:0},t.state={keyword:"",filteredLinks:[]},t}return(0,a.__extends)(t,e),t.prototype.handleClick=function(e,t){return(0,a.__awaiter)(this,void 0,void 0,function(){var n,o,i;return(0,a.__generator)(this,function(a){switch(a.label){case 0:return n=this.props,o=n.env,i=n.onSelect,e&&e.to&&(null==o||o.tracker({eventType:"link",eventData:{label:e.label,link:e.to}})),[4,null==i?void 0:i(e,t)];case 1:return a.sent(),[2,!1]}})})},t.prototype.handleChange=function(e){return(0,a.__awaiter)(this,void 0,void 0,function(){var t;return(0,a.__generator)(this,function(n){return(t=this.props.onChange)&&t(e),[2]})})},t.prototype.toggleLink=function(e,t,n){var a,o;null===(o=(a=this.props).onToggle)||void 0===o||o.call(a,e,t,n)},t.prototype.getDropInfo=function(e,t,n){var a,o,i,r=this.props,d=r.dragOnSameLevel,l=r.indentSize,s=e.target.getBoundingClientRect(),c=null===(a=this.dragNode)||void 0===a?void 0:a.link,p=s.top,u=s.height,v=s.width,h=e.clientY,f=e.clientX,g=n*(null!==(o=parseInt(l,10))&&void 0!==o?o:16),_=g+.2*v;return i=h>=p+u/2?"bottom":"top",!d&&"bottom"===i&&f>=this.startPoint.x+_&&(i="self"),{nodeId:t,dragLink:c,position:i,rect:s,height:u,left:g}},t.prototype.updateDropIndicator=function(e){var t,n=this.props,a=n.dragOnSameLevel,o=n.overflow,r=e.target.querySelector("a"),d=null==r?void 0:r.getAttribute("data-id"),s=Number(null==r?void 0:r.getAttribute("data-depth")),c=o&&o.enable&&o.wrapperComponent||"ul";if(a&&(null===(t=this.dragNode)||void 0===t?void 0:t.node.closest("".concat(c,'[role="menu"]')))!==(null==r?void 0:r.closest("".concat(c,'[role="menu"]'))))return this.setState({dropIndicator:void 0}),void(this.dropInfo=null);this.dropInfo=this.getDropInfo(e,d,s);var p=this.dropInfo,u=p.position,v=p.rect,h=p.dragLink,f=p.height,g=p.left;if(d===(null==h?void 0:h.__id))return this.setState({dropIndicator:void 0}),void(this.dropInfo=null);var _=(0,i.findDOMNode)(this).firstChild;if("self"===u){var m={top:v.top-_.getBoundingClientRect().top,left:g,width:_.getBoundingClientRect().width-g,height:f,opacity:.2};(!this.state.dropIndicator||this.state.dropIndicator&&!l()(this.state.dropIndicator,m))&&this.setState({dropIndicator:m})}else m={top:("bottom"===u?v.top+v.height:v.top)-_.getBoundingClientRect().top,left:g,width:_.getBoundingClientRect().width-g},(!this.state.dropIndicator||this.state.dropIndicator&&!l()(this.state.dropIndicator,m))&&this.setState({dropIndicator:m})},t.prototype.handleDragStart=function(e){var t=this;return function(n){n.stopPropagation();var a=n.currentTarget;n.dataTransfer.effectAllowed="copyMove",n.dataTransfer.setDragImage(a,0,0),t.dragNode={node:a,link:e},t.dropInfo=null,t.startPoint={x:n.clientX,y:n.clientY},a.addEventListener("dragend",t.handleDragEnd),document.body.addEventListener("dragover",t.handleDragOver)}},t.prototype.handleDragOver=function(e){if(e.preventDefault(),e.stopPropagation(),this.dragNode){var t=e.target.querySelector("a");(null==t?void 0:t.getAttribute("data-id"))&&this.updateDropIndicator(e)}},t.prototype.handleDragEnd=function(e){var t,n,a;e.preventDefault(),e.stopPropagation(),this.setState({dropIndicator:void 0});var o=e.currentTarget,i=o.getAttribute("data-id");if(!i){var r=o.querySelector("a");r&&(i=r.getAttribute("data-id"))}var d=null===(t=this.dropInfo)||void 0===t?void 0:t.nodeId;this.dropInfo&&d&&i!==d&&(o.removeEventListener("dragend",this.handleDragEnd),document.body.removeEventListener("dragover",this.handleDragOver),null===(a=(n=this.props).onDragUpdate)||void 0===a||a.call(n,this.dropInfo),this.dragNode=null,this.dropInfo=null)},t.prototype.normalizeNavigations=function(e,t){var n=this,i=this.props,r=i.level,d=i.stacked,l=i.mode,s=i.itemActions,p=i.render,u=i.popOverContainer,f=i.env,g=i.classnames,_=i.data,m=i.collapsed;if(!e)return[];if(r&&t>r)return[];var y=m&&1===t;return e.filter(function(e){return!(!0===e.hidden||!1===e.visible)}).map(function(e){var i=[],r=[];e.icon&&(Array.isArray(e.icon)?e.icon:[e.icon]).forEach(function(e,t){if(o.isValidElement(e))i.push(e);else if(c()(e))i.push(o.createElement(h.In,{key:"icon-".concat(t),cx:g,icon:e,className:y?"":"mr-2"}));else if(e&&(0,v.Gvm)(e)){var n="after"===e.position,a=o.createElement(h.In,{key:"icon-".concat(t),cx:g,icon:e.icon||e,className:y?"":n?"ml-2":"mr-2"});n?r.push(a):i.push(a)}});var m="string"==typeof e.label?(0,v.pbD)(e.label,_):o.isValidElement(e.label)?o.cloneElement(e.label):p("inline",e.label),b=d&&"float"!==l&&!e.expanded&&e.overflow&&(0,v.Gvm)(e.overflow)&&e.overflow.enable,C=e.children;if(b){var k=e.overflow,w=k.maxVisibleCount,I=k.overflowIndicator,S=void 0===I?"fa fa-ellipsis-h":I,N=k.overflowLabel,D=k.overflowClassName,O=w||2;O<((null==C?void 0:C.length)||0)&&(C=null==C?void 0:C.map(function(t,n){return(0,a.__assign)((0,a.__assign)({},t),{label:n===O?o.createElement("span",{className:g(D)},o.createElement(h.In,{icon:S,className:"icon Nav-item-icon"}),N&&(0,v.Gvm)(N)?p("nav-overflow-label",N):N):t.label,hidden:n>O||e.hidden,expandMore:n===O})}))}return{link:e,label:m,labelExtra:r.length?o.createElement("i",{className:g("Nav-Menu-item-icon-after")},r):null,icon:i.length?o.createElement("i",null,i):null,children:C?n.normalizeNavigations(C,"group"===e.mode?t:t+1):[],path:e.to,open:e.unfolded,extra:s?p("inline",s,{data:(0,v.ed2)(_,e),popOverContainer:u||(f&&f.getModalContainer?f.getModalContainer:function(){return document.body}),closeOnClick:!0}):null,disabled:!!e.disabled,disabledTip:e.disabledTip,hidden:e.hidden,className:e.className,mode:e.mode}})},t.prototype.handleSearch=function(e){return(0,a.__awaiter)(this,void 0,void 0,function(){var t,n,o,i,d,l,s;return(0,a.__generator)(this,function(c){return t=this.props,n=t.links,o=t.searchConfig,i=void 0===o?{}:o,d=u()(null!=n?n:[]),l=null==i?void 0:i.matchFunc,e?(l&&"string"==typeof l?l=(0,v.sce)(l,"link","keyword"):"function"==typeof l||(l=function(e,t){var n,a;return(null===(n=(0,r.matchSorter)([e],t,{keys:["label","title","key"],threshold:r.matchSorter.rankings.CONTAINS}))||void 0===n?void 0:n.length)||(null==e?void 0:e.children)&&(null===(a=e.children)||void 0===a?void 0:a.length)>0}),s=function(e,t){var n=function(e,o){if(l(o,t))return e.push((0,a.__assign)((0,a.__assign)({},o),{unfolded:!0})),e;if(Array.isArray(o.children)){var i=o.children.reduce(n,[]);i.length&&e.push((0,a.__assign)((0,a.__assign)({},o),{unfolded:!0,children:i}))}return e};return e.reduce(n,[])},this.setState({keyword:e,filteredLinks:s(d,e)}),[2]):(this.setState({keyword:"",filteredLinks:[]}),[2])})})},t.prototype.renderSearchBox=function(){var e,t,n,a=this.props,i=a.classnames,r=a.searchable,d=a.searchConfig,l=void 0===d?{}:d,s=this.state.keyword;return o.createElement(o.Fragment,null,r?o.createElement(h.Gd,{className:i("Nav-SearchBox",null==l?void 0:l.className),mini:null!==(e=l.mini)&&void 0!==e&&e,enhance:null!==(t=l.enhance)&&void 0!==t&&t,clearable:null===(n=l.clearable)||void 0===n||n,searchImediately:l.searchImediately,placeholder:l.placeholder,defaultValue:"",value:null!=s?s:"",onSearch:this.handleSearch,onChange:v.lQ1}):null)},t.prototype.render=function(){var e,t=this.props,n=t.className,a=t.style,i=t.stacked,r=t.mode,d=t.classnames,l=t.links,s=t.loading,c=t.overflow,p=t.loadingConfig,u=t.itemBadge,f=t.badge,g=t.data,_=t.location,m=t.collapsed,y=t.expandIcon,b=t.indentSize,C=t.accordion,k=t.draggable,w=t.themeColor,I=t.expandPosition,S=t.popupClassName,N=t.disabled,D=t.id,O=t.render,E=t.popOverContainer,A=t.env,L=t.searchable,x=t.testIdBuilder,R=this.state,F=R.dropIndicator,T=R.filteredLinks,P=null;if(c&&(0,v.Gvm)(c)&&c.enable){var j=c.overflowIndicator,B=void 0===j?"fa fa-ellipsis-h":j,U=c.overflowLabel,z=c.overflowClassName;P=o.createElement("span",{className:d(z)},o.createElement(o.Fragment,null,o.createElement(h.In,{icon:B,className:"icon Nav-item-icon"}),U&&(0,v.Gvm)(U)?O("nav-overflow-label",U):U))}var M=null,X="";if(a)try{M=(0,v.K8U)(a,g);var K=JSON.stringify(M).replace(/\,/g,";").replace(/\"/g,"").replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()});X=d("Nav-PopupClassName-".concat(D)),document.getElementById(X)||(0,v.zTC)({style:".".concat(X," ").concat(K),classId:X})}catch(e){}var $=Array.isArray(T)&&T.length>0?T:l,G=o.createElement(o.Fragment,null,Array.isArray($)?o.createElement(h.W1,{navigations:this.normalizeNavigations($,1),isActive:function(e,t){if(void 0===t&&(t=""),e.link&&void 0!==e.link.active)return e.link.active;var n=e.path;return!(_.pathname!==n)},isOpen:function(e){return!!e.open},stacked:!!i,mode:r,testIdBuilder:x,themeColor:w,onSelect:this.handleClick,onToggle:this.toggleLink,onChange:this.handleChange,renderLink:function(e){return e.link},badge:u||f,collapsed:m,overflowedIndicator:P,overflowMaxCount:null==c?void 0:c.maxVisibleCount,overflowedIndicatorPopupClassName:d(null==c?void 0:c.overflowPopoverClassName),overflowSuffix:(null==c?void 0:c.overflowSuffix)?O("nav-overflow-suffix",null==c?void 0:c.overflowSuffix):null,overflowItemWidth:null==c?void 0:c.itemWidth,overflowComponent:null==c?void 0:c.wrapperComponent,overflowStyle:null==c?void 0:c.style,popupClassName:"".concat(S||"").concat(X?" ".concat(X):""),expandIcon:y?"string"==typeof y?y:O("expand-icon",y):null,expandBefore:"after"!==I,inlineIndent:b,accordion:C,draggable:k,data:g,disabled:N,onDragStart:this.handleDragStart,popOverContainer:E||(A&&A.getModalContainer?A.getModalContainer:function(){return document.body})}):null,o.createElement(h.y$,{show:!!s,overlay:!0,loadingConfig:p}));return o.createElement("div",{className:d("Nav",n,(e={},e["Nav-horizontal"]=!i,e["Nav--searchable"]=!!L,e)),style:M},L?o.createElement(o.Fragment,null,this.renderSearchBox(),G):G,F?o.createElement("div",{className:d("Nav-dropIndicator"),style:F}):null)},t.defaultProps={indentSize:16},(0,a.__decorate)([v.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Number]),(0,a.__metadata)("design:returntype",Promise)],t.prototype,"handleClick",null),(0,a.__decorate)([v.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Array]),(0,a.__metadata)("design:returntype",Promise)],t.prototype,"handleChange",null),(0,a.__decorate)([v.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Number,Boolean]),(0,a.__metadata)("design:returntype",void 0)],t.prototype,"toggleLink",null),(0,a.__decorate)([v.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[DragEvent,String,Number]),(0,a.__metadata)("design:returntype",Object)],t.prototype,"getDropInfo",null),(0,a.__decorate)([v.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[DragEvent]),(0,a.__metadata)("design:returntype",void 0)],t.prototype,"updateDropIndicator",null),(0,a.__decorate)([v.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object]),(0,a.__metadata)("design:returntype",void 0)],t.prototype,"handleDragStart",null),(0,a.__decorate)([v.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[DragEvent]),(0,a.__metadata)("design:returntype",void 0)],t.prototype,"handleDragOver",null),(0,a.__decorate)([v.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[DragEvent]),(0,a.__metadata)("design:returntype",void 0)],t.prototype,"handleDragEnd",null),(0,a.__decorate)([v.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[String]),(0,a.__metadata)("design:returntype",Promise)],t.prototype,"handleSearch",null),t}(o.Component),g=(0,v.IWl)(f),_=(0,h.xy)({adaptor:function(e,t){var n=Array.isArray(e)?e:e.links||e.options||e.items||e.rows;if(!Array.isArray(n))throw new Error("payload.data.options is not array.");return n},afterLoad:function(e,t,n){return(0,a.__awaiter)(void 0,void 0,void 0,function(){var o,i,r;return(0,a.__generator)(this,function(a){switch(a.label){case 0:return o=n.dispatchEvent,i=n.data,[4,o("loaded",(0,v.ed2)(i,{data:e.value,items:e.links}))];case 1:return(null==(r=a.sent())?void 0:r.prevented)||e.value&&!(0,v.rpn)(t,function(e){return e.active})&&n.env.jumpTo((0,v.pbD)(e.value,n.data),void 0,n.data),[2]}})})},normalizeConfig:function(e,t,n,o){if(Array.isArray(e)&&"toggle"!==o){var i=n.data,r=n.env,d=n.unfoldedField,l=n.foldedField,s=n.location,c=n.level,p=n.defaultOpenLevel,u=n.disabled,h=n.valueField,f=function(e,t){return!u&&!e.disabled&&(o&&!["location-change","data-change"].includes(o)&&void 0!==e.active?e.active:t===c&&!!(0,v.cym)(e.children||[],function(t){return!!(t.hasOwnProperty("to")&&r&&r.isCurrentUrl((0,v.pbD)(t.to,i),e))})||(e.activeOn?(0,v.pgu)(e.activeOn,i)||(0,v.pgu)(e.activeOn,s):!!(e.hasOwnProperty("to")&&null!==e.to&&r&&r.isCurrentUrl((0,v.pbD)(e.to,i),e))))};e=(0,v.X$u)(e,function(e,n,o){var r,s=(0,a.__assign)((0,a.__assign)((0,a.__assign)({},e),(0,v.x_4)(e,i)),{active:f(e,o),__id:null!==(r=e.__id)&&void 0!==r?r:(0,v.OsD)()}),c=null;return!e.defer&&h&&e[h]&&(c=(0,v.cym)(t||[],function(t){return t[h]===e[h]})),s.unfolded=c?(0,v.Oez)(c,{unfoldedField:d,foldedField:l}):void 0!==e.unfolded?(0,v.Oez)(s,{unfoldedField:d,foldedField:l}):!!(p&&o<=p)||e.children&&!!(0,v.cym)(e.children,function(e,t,n){return f(e,o+n)}),s},1,!0)}return e},beforeDeferLoad:function(e,t,n){return(0,v.Z6D)(n,t,1,(0,a.__assign)((0,a.__assign)({},e),{loading:!0}))},afterDeferLoad:function(e,t,n,o,i){var r,d,l,s;return(0,a.__awaiter)(this,void 0,void 0,function(){var c,p,u,h,f;return(0,a.__generator)(this,function(g){switch(g.label){case 0:return c=i.dispatchEvent,p=i.data,[4,c("loaded",(0,v.ed2)(p,{data:n.data,item:(0,a.__assign)({},e)}))];case 1:return(null==(u=g.sent())?void 0:u.prevented)?[2]:(h=(0,a.__assign)((0,a.__assign)({},e),{loading:!1,loaded:!0,error:n.ok?void 0:n.msg}),f=Array.isArray(n.data)?n.data:(null===(r=n.data)||void 0===r?void 0:r.links)||(null===(d=n.data)||void 0===d?void 0:d.options)||(null===(l=n.data)||void 0===l?void 0:l.items)||(null===(s=n.data)||void 0===s?void 0:s.rows),Array.isArray(f)&&(h.children=f.concat(),h.unfolded=!0),[2,(0,v.Z6D)(o,t,1,h)])}})})}})(function(e){function t(t){var n=e.call(this,t)||this;return n.state={currentKey:t.showKey||"",collapsed:t.collapsed||!1},n.toggleLink=n.toggleLink.bind(n),n.handleSelect=n.handleSelect.bind(n),n.dragUpdate=n.dragUpdate.bind(n),n.handleChange=n.handleChange.bind(n),null==t||t.onRef(n),n}return(0,a.__extends)(t,e),t.prototype.componentDidMount=function(){Array.isArray(this.props.links)&&this.props.updateConfig(this.props.links,"mount")},t.prototype.componentDidUpdate=function(e,t){l()(this.props.location,e.location)?l()(this.props.links,e.links)?(0,v.JQ)(this.props.data,e.data,!1,void 0,void 0,10)&&this.props.updateConfig(this.props.config,"data-change"):this.props.updateConfig(this.props.links,"update"):this.props.updateConfig(this.props.config,"location-change"),e.defaultOpenLevel!==this.props.defaultOpenLevel&&this.props.updateConfig(this.props.config,"update"),e.collapsed!==this.props.collapsed&&this.setState({collapsed:this.props.collapsed}),t.collapsed!==this.state.collapsed&&this.props.dispatchEvent("collapsed",(0,v.ed2)(this.props.data,{collapsed:this.state.collapsed}))},t.prototype.getCurrentLink=function(e){var t=null,n=this.props,a=n.config,o=n.data,i=n.valueField,r=(0,v.GvO)(e,o,"| raw");return e&&(t=(0,v.cym)(a,function(e){return i?e[i]===r:e.label==r||e.key==r})),t},t.prototype.toggleLink=function(e,t,n){return(0,a.__awaiter)(this,void 0,void 0,function(){var t,o,i,r,d,l,s,c,p,u,h;return(0,a.__generator)(this,function(f){switch(f.label){case 0:return t=this.props,o=t.config,i=t.updateConfig,r=t.deferLoad,d=t.dispatchEvent,l=t.stacked,s=t.mode,c=t.accordion,p=t.data,u=l&&"float"!==s&&c,[4,d("toggled",(0,v.ed2)(p,{item:(0,a.__assign)({},e),open:void 0!==n?!n:!e.unfolded}))];case 1:return(null==(h=f.sent())?void 0:h.prevented)||(e.defer&&!e.loaded?r(e):i((0,v.X$u)(o,function(t){return e.__id===t.__id?(0,a.__assign)((0,a.__assign)({},t),{unfolded:void 0!==n?!n:!t.unfolded}):(0,a.__assign)((0,a.__assign)({},t),{unfolded:u?!!(0,v.cym)(t.children||[],function(t){return t===e}):t.unfolded})}),"toggle")),[2]}})})},t.prototype.dragUpdate=function(e){var t,n;return(0,a.__awaiter)(this,void 0,void 0,function(){var o,i,r,d,l,s;return(0,a.__generator)(this,function(a){switch(a.label){case 0:return o=this.props.config,i=e.nodeId,r=e.dragLink,d=e.position,r&&(l=(0,v.iXH)(o,function(e){return e.__id===r.__id}),o=(0,v.Z6D)(o,l,1),"self"===d?(0,v.X$u)(o,function(e){return e.__id===i&&(e.children||(e.children=[]),e.children.push(r)),e}):(s=(0,v.iXH)(o,function(e){return e.__id===i}),"bottom"===d&&s&&s.push(s.pop()+1),o=(0,v.Z6D)(o,s,0,r))),this.props.updateConfig(o,"update"),null===(n=(t=this.props).onOrderChange)||void 0===n||n.call(t,o),[4,this.saveOrder((0,v.X$u)(o,function(e){for(var t in e)/^__.*$/.test(t)&&delete e[t];return e}))];case 1:return a.sent(),[2]}})})},t.prototype.saveOrder=function(e){return(0,a.__awaiter)(this,void 0,void 0,function(){var t,n,o,i,r;return(0,a.__generator)(this,function(a){switch(a.label){case 0:return t=this.props,n=t.saveOrderApi,o=t.env,i=t.data,r=t.reload,n&&(0,v.Amo)(n)?[4,null==o?void 0:o.fetcher(n,(0,v.ed2)(i,{data:e}),{method:"post"})]:[3,2];case 1:return a.sent(),r(),[3,3];case 2:this.props.onOrderChange||null==o||o.alert("NAV saveOrderApi is required!"),a.label=3;case 3:return[2]}})})},t.prototype.expandLink=function(e){var t=this.props,n=t.config;(0,t.updateConfig)((0,v.X$u)(n,function(t){return(0,v.cym)((null==t?void 0:t.children)||[],function(t){return t.__id===e.__id})?(0,a.__assign)((0,a.__assign)({},t),{expanded:!0}):(0,a.__assign)({},t)}),"expand")},t.prototype.handleChange=function(e){var t=this.props,n=t.dispatchEvent,a=t.data;setTimeout(function(){n("change",(0,v.ed2)(a,{value:e}))})},t.prototype.handleSelect=function(e,t){return(0,a.__awaiter)(this,void 0,void 0,function(){var n,o,i,r,d,l,s,c,p;return(0,a.__generator)(this,function(u){switch(u.label){case 0:return n=this.props,o=n.onSelect,i=n.env,r=n.data,d=n.level,l=n.dispatchEvent,s=n.updateConfig,c=n.config,[4,l("click",(0,v.ed2)(r,{item:(0,a.__assign)({},e)}))];case 1:return(null==(p=u.sent())?void 0:p.prevented)||o&&!1===o(e)?[2]:t===d?(s((0,v.X$u)(c,function(t){return(0,a.__assign)((0,a.__assign)({},t),{active:t.__id===e.__id})}),"select"),[2]):e.expandMore?(this.expandLink(e),[2]):e.to?(null==i||i.jumpTo((0,v.pbD)(e.to,r),e,r),[2]):[2]}})})},t.prototype.render=function(){var e=this.props,t=e.disabled,n=e.loading,i=e.config,r=(e.deferLoad,e.updateConfig,(0,a.__rest)(e,["disabled","loading","config","deferLoad","updateConfig"])),d=this.getCurrentLink(this.state.currentKey);return o.createElement(g,(0,a.__assign)({},r,{loading:n,links:(null==d?void 0:d.children)||i,collapsed:this.state.collapsed,disabled:t||n,onSelect:this.handleSelect,onToggle:this.toggleLink,onChange:this.handleChange,onDragUpdate:this.dragUpdate}))},t}(o.Component)),m=function(e){function t(t,n){var a=e.call(this,t)||this;return a.remoteRef=void 0,n.registerComponent(a),a}return(0,a.__extends)(t,e),t.prototype.remoteConfigRef=function(e){this.remoteRef=e},t.prototype.getRef=function(e){this.navRef=e},t.prototype.componentDidUpdate=function(e){this.remoteRef&&this.props.source!==e.source&&this.remoteRef.syncConfig()},t.prototype.componentWillUnmount=function(){this.context.unRegisterComponent(this)},t.prototype.doAction=function(e,t,n,a){var o,i=null==e?void 0:e.actionType,r=(null==a?void 0:a.value)||(null===(o=null==e?void 0:e.data)||void 0===o?void 0:o.value);if("updateItems"===i){var d=this.props.valueField,l=[];if(r)if(Array.isArray(r)){if(r.length>0){var s=r.find(function(e){return e.children&&e.children.length});if(s){var c=d?s[d]:(null==s?void 0:s.key)||(null==s?void 0:s.label);this.navRef.state.currentKey!==c&&(this.navRef.setState({currentKey:c}),l=s.children)}else this.navRef.setState({currentKey:""})}}else if("string"==typeof r&&this.navRef.state.currentKey!==r){this.navRef.setState({currentKey:r});var p=this.navRef.getCurrentLink(r);l=null==p?void 0:p.children}if(l.length>0){var u=this.props,h=u.env,f=u.data,g=(0,v.cym)(l,function(e){return h&&h.isCurrentUrl((0,v.pbD)(e.to,f),e)});null==h||h.jumpTo((0,v.pbD)(g?g.to:l[0].to,f),void 0,f)}}else if("collapse"===i){var _=void 0!==r?r:!this.navRef.state.collapsed;this.navRef.setState({collapsed:_})}else"reset"===i&&this.navRef.setState({currentKey:""})},t.prototype.reload=function(e,t,n){var a;if(t)return this.receive(t);var o=this.props,i=o.data,r=(o.translate,n?(0,v.ed2)(i,n):i);null===(a=this.remoteRef)||void 0===a||a.loadConfig(r)},t.prototype.receive=function(e){this.reload(void 0,void 0,e)},t.prototype.render=function(){var e=this.props,t=e.id,n=(0,a.__rest)(e,["id"]);return o.createElement(_,(0,a.__assign)({},n,{id:t||(0,v.OsD)(),onRef:this.getRef,reload:this.reload,remoteConfigRef:this.remoteConfigRef}))},t.contextType=v.MzX,(0,a.__decorate)([v.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object]),(0,a.__metadata)("design:returntype",void 0)],t.prototype,"remoteConfigRef",null),(0,a.__decorate)([v.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object]),(0,a.__metadata)("design:returntype",void 0)],t.prototype,"getRef",null),(0,a.__decorate)([v.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[String,Object,Object]),(0,a.__metadata)("design:returntype",void 0)],t.prototype,"reload",null),(0,a.__decorate)([v.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object]),(0,a.__metadata)("design:returntype",void 0)],t.prototype,"receive",null),(0,a.__decorate)([(0,v.A49)({type:"nav",alias:["navigation"],name:"nav"}),(0,a.__metadata)("design:paramtypes",[Object,Object])],t)}(o.Component)}}]);