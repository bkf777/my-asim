"use strict";(self.webpackChunkamis_editor_demo=self.webpackChunkamis_editor_demo||[]).push([[3032],{63032:function(t,e,i){i.r(e),i.d(e,{CheckboxControlRenderer:function(){return y},CityPicker:function(){return c},LocationControl:function(){return p},default:function(){return u}});var n=i(31635),a=i(96540),r=i(5917),o=i(25627),d=i(66283),s=function(t){var e,i=t.value,n=t.db,a=t.delimiter,r=void 0===a?",":a,o={code:0,province:"",provinceCode:0,city:"",cityCode:0,district:"",districtCode:0,street:""};if(!n||!i)return o;var d=i&&i.code||"number"==typeof i&&i||"string"==typeof i&&/(\d{6})/.test(i)&&RegExp.$1;if(d&&n[d]){d=parseInt(d,10),o.code=d;var s=d-d%1e4;n[s]&&(o.provinceCode=s,o.province=n[s]);var l=d-d%100;l!==s&&n[l]?(o.cityCode=l,o.city=n[l]):~(null===(e=n.city[s])||void 0===e?void 0:e.indexOf(d))&&(o.cityCode=d,o.city=n[d]),d%100&&(o.district=n[d],o.districtCode=d)}return i&&i.street?o.street=i.street:"string"==typeof i&&~i.indexOf(r)&&(o.street=i.slice(i.indexOf(r)+r.length)),o},l=function(t){i.e(7556).then(i.bind(i,47556)).then(t)},c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={code:0,province:"",provinceCode:0,city:"",cityCode:0,district:"",districtCode:0,street:""},e}return(0,n.__extends)(e,t),e.prototype.componentDidMount=function(){var t=this;this.loadDb(function(){return t.syncIn()})},e.prototype.componentDidUpdate=function(t){var e=this,i=this.props;i.value!==t.value&&this.loadDb(function(){return e.syncIn(i)})},e.prototype.loadDb=function(t){var e=this;this.state.db?null==t||t():l(function(i){e.setState({db:(0,n.__assign)((0,n.__assign)({},i.default),{province:i.province,city:i.city,district:i.district})},t)})},e.prototype.handleProvinceChange=function(t){this.setState(t?{province:t.label,provinceCode:t.value,city:"",cityCode:0,district:"",districtCode:0,street:"",code:t?t.value:0}:{code:0,province:"",provinceCode:0,city:"",cityCode:0,district:"",districtCode:0,street:""},this.syncOut)},e.prototype.handleCityChange=function(t){if(t.value%100)return this.handleDistrictChange(t,{cityCode:t.value});this.setState(t?{city:t.label,cityCode:t.value,district:"",districtCode:0,street:"",code:t.value}:{city:"",cityCode:0,district:"",districtCode:0,street:"",code:this.state.provinceCode},this.syncOut)},e.prototype.handleDistrictChange=function(t,e){void 0===e&&(e={}),this.setState(t?(0,n.__assign)((0,n.__assign)({},e),{district:t.label,districtCode:t.value,street:"",code:t.value}):(0,n.__assign)((0,n.__assign)({},e),{district:"",districtCode:0,street:"",code:this.state.cityCode}),this.syncOut)},e.prototype.handleStreetChange=function(t){this.setState({street:t.currentTarget.value})},e.prototype.handleStreetEnd=function(){this.syncOut()},e.prototype.syncIn=function(t){void 0===t&&(t=this.props);var e=this.state.db,i=t.value,n=t.delimiter;e&&this.setState(s({value:i,delimiter:n,db:e}))},e.prototype.syncOut=function(){var t=this.props,e=t.onChange,i=t.allowStreet,n=t.joinValues,a=t.extractValue,r=t.delimiter,o=this.state,d=o.code,s=o.province,l=o.city,c=o.district,u=o.street,p=o.provinceCode,y=o.cityCode,h=o.districtCode;e((void 0===a?n:a)?d?i&&u?[d,u].join(r):String(d):"":{code:d,provinceCode:p,province:s,cityCode:y,city:l,districtCode:h,district:c,street:u})},e.prototype.render=function(){var t,e,i=this.props,r=i.classnames,d=i.className,s=(i.style,i.disabled),l=i.allowCity,c=i.allowDistrict,u=i.allowStreet,p=i.searchable,y=i.translate,h=i.loadingConfig,v=i.popOverContainer,_=i.itemClassName,C=i.testIdBuilder,g=this.state,m=g.provinceCode,f=g.cityCode,b=g.districtCode,O=g.street,w=g.db;return w?a.createElement("div",{className:r("CityPicker",d)},a.createElement(o.l6,{className:r(_),searchable:p,disabled:s,options:w.province.map(function(t){return{label:w[t],value:t}}),value:m||"",onChange:this.handleProvinceChange,popOverContainer:v,testIdBuilder:null==C?void 0:C.getChild("province")}),l&&w.city[m]&&w.city[m].length?a.createElement(o.l6,{className:r(_),searchable:p,disabled:s,options:w.city[m].map(function(t){return{label:w[t],value:t}}),value:f||"",onChange:this.handleCityChange,popOverContainer:v,testIdBuilder:null==C?void 0:C.getChild("city")}):null,f&&c&&(null===(e=null===(t=w.district[m])||void 0===t?void 0:t[f])||void 0===e?void 0:e.length)?a.createElement(o.l6,{className:r(_),searchable:p,disabled:s,options:w.district[m][f].map(function(t){return{label:w[t],value:t}}),value:b||"",onChange:this.handleDistrictChange,popOverContainer:v,testIdBuilder:null==C?void 0:C.getChild("district")}):null,u&&m?a.createElement("input",(0,n.__assign)({className:r("CityPicker-input"),value:O||"",onChange:this.handleStreetChange,onBlur:this.handleStreetEnd,placeholder:y("City.street"),disabled:s},null==C?void 0:C.getChild("street").getTestId())):null):a.createElement(o.y$,{show:!0,size:"sm",loadingConfig:h})},e.defaultProps={joinValues:!0,extractValue:!0,delimiter:",",allowCity:!0,allowDistrict:!0,allowStreet:!1},(0,n.__decorate)([r.d6t,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object]),(0,n.__metadata)("design:returntype",void 0)],e.prototype,"handleProvinceChange",null),(0,n.__decorate)([r.d6t,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object]),(0,n.__metadata)("design:returntype",void 0)],e.prototype,"handleCityChange",null),(0,n.__decorate)([r.d6t,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object]),(0,n.__metadata)("design:returntype",void 0)],e.prototype,"handleDistrictChange",null),(0,n.__decorate)([r.d6t,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object]),(0,n.__metadata)("design:returntype",void 0)],e.prototype,"handleStreetChange",null),(0,n.__decorate)([r.d6t,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[]),(0,n.__metadata)("design:returntype",void 0)],e.prototype,"handleStreetEnd",null),(0,n.__decorate)([r.d6t,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object]),(0,n.__metadata)("design:returntype",void 0)],e.prototype,"syncIn",null),(0,n.__decorate)([r.d6t,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[]),(0,n.__metadata)("design:returntype",void 0)],e.prototype,"syncOut",null),e}(a.Component),u=(0,r.IWl)((0,r.t5k)(c)),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={db:null},e}return(0,n.__extends)(e,t),e.prototype.doAction=function(t,e,i){var n,a,o=this.props,d=o.resetValue,s=o.onChange,l=o.formStore,c=o.store,u=o.name,p=null==t?void 0:t.actionType;if("clear"===p)s("");else if("reset"===p){var y=null!==(a=(0,r.dnO)(null!==(n=null==l?void 0:l.pristine)&&void 0!==n?n:null==c?void 0:c.pristine,u))&&void 0!==a?a:d;s(null!=y?y:"")}},e.prototype.handleChange=function(t){return(0,n.__awaiter)(this,void 0,void 0,function(){var e,i,a,o;return(0,n.__generator)(this,function(n){switch(n.label){case 0:return e=this.props,i=e.dispatchEvent,a=e.onChange,[4,i("change",(0,r.RKM)(this.props,{value:t},"value"))];case 1:return(null==(o=n.sent())?void 0:o.prevented)||a(t),[2]}})})},e.prototype.renderStatic=function(t){var e=this;void 0===t&&(t="");var i=this.props,r=i.value,d=i.delimiter,c=i.loadingConfig;if(!this.state.db)return l(function(t){e.setState({db:(0,n.__assign)((0,n.__assign)({},t.default),{province:t.province,city:t.city,district:t.district})})}),a.createElement(o.y$,{size:"sm",show:!0,loadingConfig:c});if(!r)return a.createElement(a.Fragment,null,t);var u=s({value:r,delimiter:d,db:this.state.db}),p=u.province,y=u.city,h=u.district,v=u.street;return a.createElement(a.Fragment,null,[p,y,h,v].filter(function(t){return!!t}).join(d))},e.prototype.render=function(){var t=this.props,e=t.value,i=t.allowCity,n=t.allowDistrict,r=t.extractValue,d=t.joinValues,s=t.allowStreet,l=t.disabled,c=t.searchable,p=t.env,y=t.mobileUI,h=t.popOverContainer,v=t.itemClassName,_=t.testIdBuilder;return y?a.createElement(o.td,{value:e,popOverContainer:null==p?void 0:p.getModalContainer,onChange:this.handleChange,allowCity:i,allowDistrict:n,extractValue:r,joinValues:d,allowStreet:s,disabled:l,mobileUI:y}):a.createElement(u,{itemClassName:v,popOverContainer:h||(null==p?void 0:p.getModalContainer),searchable:c,value:e,onChange:this.handleChange,allowCity:i,allowDistrict:n,extractValue:r,joinValues:d,allowStreet:s,disabled:l,testIdBuilder:_})},(0,n.__decorate)([r.d6t,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object,Object,Boolean]),(0,n.__metadata)("design:returntype",void 0)],e.prototype,"doAction",null),(0,n.__decorate)([r.d6t,(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[Object]),(0,n.__metadata)("design:returntype",Promise)],e.prototype,"handleChange",null),(0,n.__decorate)([(0,d.E)(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[]),(0,n.__metadata)("design:returntype",void 0)],e.prototype,"render",null),e}(a.Component),y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,n.__extends)(e,t),(0,n.__decorate)([(0,r.eIh)({type:"input-city",sizeMutable:!1})],e)}(p)}}]);