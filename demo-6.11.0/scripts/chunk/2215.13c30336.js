"use strict";(self.webpackChunkamis_editor_demo=self.webpackChunkamis_editor_demo||[]).push([[2215,8447],{12215:function(e,t,n){n.r(t),n.d(t,{TableRenderer:function(){return C},default:function(){return x}});var a=n(31635),r=n(96540),o=n(40961),i=n(22451),s=n(50346),l=n(88055),d=n.n(l),c=n(2404),u=n.n(c),p=n(5287),m=n.n(p),h=n(5917),_=n(25627),v=n(36607),y=function(e){function t(t){var n=e.call(this,t)||this;return n.formItems=[],n.handleSubmit=n.handleSubmit.bind(n),n.handleAction=n.handleAction.bind(n),n}return(0,a.__extends)(t,e),t.prototype.buildSchema=function(){var e,t,n,r,o,i,s,l=this.props,d=l.searchable,c=l.sortable,u=l.name,p=l.label,m=l.translate,h=l.testIdBuilder;if(!0===d?s={title:"",controls:[{type:"text",name:u,placeholder:p,clearable:!0,testid:null===(e=null==h?void 0:h.getChild(u))||void 0===e?void 0:e.getTestIdValue()}]}:d&&(s=d.controls||d.tabs||d.fieldSet?(0,a.__assign)((0,a.__assign)({title:""},d),{controls:Array.isArray(d.controls)?d.controls.concat():void 0}):"form"===(null==d?void 0:d.type)?d:{title:"",className:d.formClassName,controls:[(0,a.__assign)({type:d.type||"text",name:d.name||u,testid:null===(t=null==h?void 0:h.getChild(d.name||u))||void 0===t?void 0:t.getTestIdValue(),placeholder:p},d)]}),s&&s.controls&&c&&s.controls.unshift({type:"hidden",name:"orderBy",value:u},{type:"button-group",name:"order",label:m("sort"),options:[{label:m("asc"),value:"asc"},{label:m("desc"),value:"desc"}]}),s){var _=[];(s.controls||s.body||[]).forEach(function(e){return e.name&&"orderBy"!==e.name&&"order"!==e.name&&_.push(e.name)}),this.formItems=_,s=(0,a.__assign)((0,a.__assign)({},s),{type:"form",wrapperComponent:"div",wrapWithPanel:!0,title:!1,testid:null===(n=null==h?void 0:h.getChild("form"))||void 0===n?void 0:n.getTestIdValue(),actions:[{type:"button",label:m("reset"),actionType:"clear-and-submit",testid:null===(r=null==h?void 0:h.getChild("btn-reset"))||void 0===r?void 0:r.getTestIdValue()},{type:"button",label:m("cancel"),actionType:"cancel",testid:null===(o=null==h?void 0:h.getChild("btn-cancel"))||void 0===o?void 0:o.getTestIdValue()},{label:m("search"),type:"submit",primary:!0,testid:null===(i=null==h?void 0:h.getChild("btn-search"))||void 0===i?void 0:i.getTestIdValue()}]})}return s||"error"},t.prototype.handleAction=function(e,t,n,r){return(0,a.__awaiter)(this,void 0,void 0,function(){var o,i,s,l,d,c,u;return(0,a.__generator)(this,function(p){switch(p.label){case 0:return o=this.props,i=o.onAction,s=o.data,l=o.dispatchEvent,d=o.name,"cancel"===t.actionType||"close"===t.actionType?(r(),[2]):"reset"===t.actionType?(r(),this.handleReset(),[2]):(c=(0,a.__assign)({},s),this.formItems.forEach(function(e){return(0,h.BBb)(c,e,void 0)}),[4,l("columnSearch",(0,h.ed2)(s,{searchName:d,searchValue:c}))]);case 1:return(null==(u=p.sent())?void 0:u.prevented)||i&&i(e,t,n),[2]}})})},t.prototype.handleReset=function(){return(0,a.__awaiter)(this,void 0,void 0,function(){var e,t,n,r,o;return(0,a.__generator)(this,function(i){switch(i.label){case 0:return e=this.props,t=e.onSearch,n=e.data,r=e.name,o=(0,a.__assign)({},n),this.formItems.forEach(function(e){return(0,h.BBb)(o,e,void 0)}),o.orderBy===r&&(o.orderBy="",o.order="asc"),t?[4,t(r,o)]:[3,2];case 1:i.sent(),i.label=2;case 2:return t&&t(o),[2]}})})},t.prototype.handleSubmit=function(e,t){return(0,a.__awaiter)(this,void 0,void 0,function(){var n,r,o;return(0,a.__generator)(this,function(i){switch(i.label){case 0:return n=this.props,r=n.onSearch,o=n.name,e.order&&(e=(0,a.__assign)((0,a.__assign)({},e),{orderBy:o})),r?[4,r(o,e)]:[3,2];case 1:i.sent(),i.label=2;case 2:return t(),[2]}})})},t.prototype.isActive=function(){var e=this.props,t=e.data,n=e.name,a=e.orderBy;return a&&a===n||this.formItems.some(function(e){return null==t?void 0:t[e]})},t.prototype.render=function(){var e=this,t=this.props,n=t.render,i=t.name,s=t.data,l=t.searchable,d=t.order,c=t.orderBy,u=t.popOverContainer,p=t.classPrefix,m=t.classnames,h=t.testIdBuilder,v=this.buildSchema(),y=this.isActive();return r.createElement(_.EQ,{className:"".concat(p,"TableCell-searchBtn"),layerClassName:m("".concat(p,"TableCell-searchPopOver"),l.className),active:y,filterIcon:r.createElement(_.In,{icon:"search",className:"icon",iconContent:"table-search-icon",testIdBuilder:null==h?void 0:h.getChild("search-icon")}),popOverContainer:u||function(){return(0,o.findDOMNode)(e)},filterDropdown:function(t){t.setSelectedKeys,t.selectedKeys;var r=t.confirm;return t.clearFilters,n("quick-search-form",v,{data:(0,a.__assign)((0,a.__assign)({},s),{orderBy:c,order:c&&c===i?d:""}),onSubmit:function(t){return e.handleSubmit(t,r)},onAction:function(t,n,a){e.handleAction(t,n,a,r)}})},testIdBuilder:h})},t}(r.Component),f=(0,v.observer)(function(e){var t=e.store;return r.createElement(y,(0,a.__assign)({},e,{data:t.query,orderBy:t.orderBy,order:t.order}))}),g=(n(58899),n(21199)),b=n(24123),w=n(63957),S=n(35151),x=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.propsNeedRemove=["title"],t}(0,a.__extends)(t,e),t.defaultProps=(0,a.__assign)((0,a.__assign)({},S.nA.defaultProps),{wrapperComponent:"div"}),t=(0,a.__decorate)([(0,h.A49)({type:"cell-field",name:"cell-field"}),(0,w.y)(),(0,b.c)(),(0,g.EX)()],t)}(S.nA),n(38447),function(e){function t(n,a){var r=e.call(this,n)||this;r.renderedToolbars=[],r.subForms={},r.columns=[],r.reactions=[],a.registerComponent(r);var o=n.store,s=n.columnsTogglable,l=n.columns,d=n.rowSelection,c=n.keyField,u=n.primaryField,p=n.canAccessSuperData;return o.update({columnsTogglable:s,columns:l,canAccessSuperData:p,rowSelectionKeyField:u||(null==d?void 0:d.keyField)||c}),t.syncRows(o,n,void 0)&&r.syncSelected(),r.columns=r.buildColumns(o.filteredColumns,[],[]),r.rowSelection=r.buildRowSelection(),r.expandable=r.buildExpandable(),r.reactions.push((0,i.reaction)(function(){return o.currentSelectedRowKeys.join(",")},function(){r.rowSelection=r.buildRowSelection(),r.forceUpdate()})),r.reactions.push((0,i.reaction)(function(){return o.currentExpandedKeys.join(",")},function(){r.expandable=r.buildExpandable(),r.forceUpdate()})),r.reactions.push((0,i.reaction)(function(){return o.filteredColumns},function(){r.columns=r.buildColumns(o.filteredColumns,[],[]),r.forceUpdate()})),r}return(0,a.__extends)(t,e),t.prototype.componentWillUnmount=function(){this.context.unRegisterComponent(this),this.reactions&&this.reactions.forEach(function(e){return e()})},t.prototype.syncSelected=function(){var e=this.props,t=e.store,n=e.onSelect;n&&n(t.selectedRows.map(function(e){return e.data}),t.unSelectedRows.map(function(e){return e.data}))},t.syncRows=function(e,t,n){var r,o=t.source,i=(0,h.$_G)(t,function(e){return e.items}),s=[],l=!1;if(!Array.isArray(i)||n&&(0,h.$_G)(n,function(e){return e.items})===i){if("string"==typeof o){var d=(0,h.GvO)(o,t.data,"| raw"),c=n?(0,h.GvO)(o,n.data,"| raw"):null;c&&c===d?l=!1:Array.isArray(d)&&(l=!0,s=d)}}else l=!0,s=i;l&&e.initRows(s,t.getEntryId,t.reUseRow,t.childrenColumnName);var u=[],p=e.keyField;Array.isArray(t.selected)?u=t.selected.map(function(e){return e[p]})||[]:t.rowSelection&&t.rowSelection.selectedRowKeysExpr?s.forEach(function(e,n){var a;(0,h.pgu)((null===(a=t.rowSelection)||void 0===a?void 0:a.selectedRowKeysExpr)||"",{record:e,rowIndex:n})&&u.push(e[p])}):t.rowSelection&&t.rowSelection.selectedRowKeys&&(u=(0,a.__spreadArray)([],(0,a.__read)(t.rowSelection.selectedRowKeys),!1)),l&&u.length>0&&e.updateSelected(u);var m=[],_=t.primaryField||(null===(r=t.expandable)||void 0===r?void 0:r.keyField)||t.keyField;return t.expandable&&t.expandable.expandedRowKeysExpr?s.forEach(function(e,n){var a;(0,h.pgu)((null===(a=t.expandable)||void 0===a?void 0:a.expandedRowKeysExpr)||"",{record:e,rowIndex:n})&&m.push(e[_])}):t.expandable&&t.expandable.expandedRowKeys&&(m=(0,a.__spreadArray)([],(0,a.__read)(t.expandable.expandedRowKeys),!1)),l&&m.length>0&&e.updateExpanded(m,_),l},t.prototype.componentDidUpdate=function(e){var n,a,r,o=this.props,i=o.store;if((0,h.MwK)(["orderBy","columnsTogglable","canAccessSuperData"],e,o,function(e){e.orderBy&&!o.onQuery&&delete e.orderBy,i.update(e,{resolveDefinitions:o.resolveDefinitions})}),(0,h.TIf)(["source","value","items"],e,o)||!o.value&&!o.items&&(o.data!==e.data||"string"==typeof o.source&&(0,h.joH)(o.source)))t.syncRows(i,o,e)&&this.syncSelected();else if((0,h.Kbh)(e.selected,o.selected)){var s=i.keyField,l=i.selectedRows.map(function(e){return e[s]}).join(",");i.updateSelected(o.selected.map(function(e){return e[s]})||[]),l!==i.selectedRows.map(function(e){return e[s]}).join(",")&&this.syncSelected()}(0,h.TIf)(["columns"],e,o)&&i.update({columns:o.columns}),(0,h.TIf)(["rowSelection","selectable","multiple","maxKeepItemSelectionLength"],e,o)&&(this.rowSelection=this.buildRowSelection()),(0,h.TIf)(["query","pageField","perPageField"],e,o)&&i.updateQuery(o.query,void 0,o.pageField,o.perPageField,!0),u()(null===(n=null==e?void 0:e.rowSelection)||void 0===n?void 0:n.keyField,null===(a=o.rowSelection)||void 0===a?void 0:a.keyField)&&u()(e.keyField,o.keyField)||i.update({rowSelectionKeyField:o.primaryField||(null===(r=o.rowSelection)||void 0===r?void 0:r.keyField)||o.keyField})},t.prototype.getPopOverContainer=function(){return(0,o.findDOMNode)(this)},t.prototype.subFormRef=function(e,t,n){var a=this.props.quickEditFormRef;a&&a(e,t,n),this.subForms["".concat(t,"-").concat(n)]=e,e&&this.props.store.addForm(e.props.store,n)},t.prototype.reset=function(){var e=this;this.props.store.reset();var t=[];Object.keys(this.subForms).forEach(function(n){return e.subForms[n]&&t.push(e.subForms[n])}),t.forEach(function(e){return e.clearErrors()})},t.prototype.renderCellSchema=function(e,t){var n=this.props,r=n.render;if(n.store,e&&(0,h.Gvm)(e)){e.width,e.children;var o=e.title,i=(0,a.__rest)(e,["width","children","title"]);return r("cell-field",(0,a.__assign)((0,a.__assign)({},i),{title:o||i.label,type:"cell-field",column:i,data:t.data,name:e.name}),t)}return e},t.prototype.renderSchema=function(e,t,n){var r=this.props.render;if(t&&(0,h.Gvm)(t))return r(e||"field",(0,a.__assign)((0,a.__assign)({},t),{data:null==n?void 0:n.data}),n);if(Array.isArray(t)){var o=[];return t.forEach(function(t,i){return o.push(r(e||"field",(0,a.__assign)((0,a.__assign)({},t),{data:null==n?void 0:n.data}),(0,a.__assign)((0,a.__assign)({},n),{key:i})))}),o}return"string"==typeof t?(0,h.pbD)(t,null==n?void 0:n.data):t},t.prototype.buildColumns=function(e,t,n){var o=this,i=this.props,s=i.render,l=i.store,c=i.popOverContainer,u=(i.canAccessSuperData,i.showBadge),p=i.itemBadge,m=i.data,_=i.classnames,v=i.env,y=i.testIdBuilder,g=[];return Array.isArray(e)&&e.forEach(function(e,i){return(0,a.__awaiter)(o,void 0,void 0,function(){var o,b,w,S,x,C,R,k,E,A,F,I,N=this;return(0,a.__generator)(this,function(O){switch(O.label){case 0:return o=(0,a.__assign)({},e),b=null,w=o.title||o.label,S=(0,a.__assign)((0,a.__assign)({},m),{popOverContainer:c||this.getPopOverContainer}),(0,h.Gvm)(e.title)?b=d()(e.title):"string"==typeof w&&(b={type:"plain",tpl:w}),e.align&&(b.align=e.align,b.className="flex-1"),x=function(t){var n,a=N.renderCellSchema(b,S),o=null;return e.remark&&(o=s("remark",{type:"remark",tooltip:e.remark,container:N.getPopOverContainer})),r.createElement("div",{key:i,className:_("Table-head-cell-wrapper",(n={},n["".concat(e.className)]=!!e.className,n["".concat(e.titleClassName)]=!!e.titleClassName,n)),style:{justifyContent:{right:"flex-end",center:"center"}[e.align]||"flex-start"}},a,o,t)},Object.assign(o,{title:x}),C=!!(null===(I=e.children)||void 0===I?void 0:I.length),e.canAccessSuperData,e.type&&Object.assign(o,{render:function(r,o,s,d,m){var _=l.getRowByIndex(s,(0,a.__spreadArray)([],(0,a.__read)(m||[]),!1))||{},v=null==y?void 0:y.getChild("row-".concat(s,"-cell-").concat(d)),f={children:N.renderCellSchema(e,{data:_.locals,btnDisabled:l.dragging,popOverContainer:c||N.getPopOverContainer,quickEditFormRef:N.subFormRef,onQuickChange:function(e,t,n,a){N.handleQuickChange(_,e,t,n,a)},row:_,showBadge:u&&0===i,itemBadge:p,testIdBuilder:v}),props:{}};if(!C&&e.rowSpanExpr){var g=+(0,h.pbD)(e.rowSpanExpr,{record:o,rowIndex:s,colIndex:d});g&&(f.props.rowSpan=g,t.push({colIndex:d,rowIndex:s,rowSpan:g}))}if(!C&&e.colSpanExpr){var b=+(0,h.pbD)(e.colSpanExpr,{record:o,rowIndex:s,colIndex:d});b&&(f.props.colSpan=b,n.push({colIndex:d,rowIndex:s,colSpan:b}))}return t.forEach(function(e){d===e.colIndex&&s>e.rowIndex&&s<e.rowIndex+(e.rowSpan||0)&&(f.props.rowSpan=0)}),n.forEach(function(e){s===e.rowIndex&&d>e.colIndex&&d<e.colIndex+(e.colSpan||0)&&(f.props.colSpan=0)}),f}}),e.searchable&&(o.filterDropdown=r.createElement(f,(0,a.__assign)({},this.props,{popOverContainer:this.getPopOverContainer,name:e.name,searchable:e.searchable,onSearch:this.handleSearch,key:"th-search-"+i,testIdBuilder:null==y?void 0:y.getChild("head-search-".concat(i))}))),e.sortable&&(o.sorter=!0),e.filterable?e.filterable.options?(o.filters=e.filterable.options.map(function(e){return"string"==typeof e?{text:e,value:e}:{text:e.label,value:e.value}}),[3,4]):[3,1]:[3,4];case 1:return e.filterable.source?(R=e.filterable.source,(0,h.joH)(R)?(k=(0,h.GvO)(R,m,"| raw"),o.filters=k,[3,4]):[3,2]):[3,4];case 2:return(0,h.Amo)(R,m)?((E=(0,h.UfW)(R)).cache=3e3,[4,v.fetcher(E,m)]):[3,4];case 3:A=O.sent(),F=A.data&&A.data.options||[],o.filters=F,O.label=4;case 4:return C&&(o.children=this.buildColumns(e.children,t,n)),g.push(o),[2]}})})}),g},t.prototype.buildSummary=function(e,t){var n=this,a=[];return Array.isArray(t)&&t.forEach(function(t,r){(0,h.Gvm)(t)?a.push({colSpan:t.colSpan,fixed:t.fixed,cellClassName:t.cellClassName,render:function(a){return n.renderSchema(e,t,{data:a})}}):Array.isArray(t)&&(a[r]||a.push([]),t.forEach(function(t){a[r].push({colSpan:t.colSpan,fixed:t.fixed,cellClassName:t.cellClassName,render:function(a){return n.renderSchema(e,t,{data:a})}})}))}),a.length?a:null},t.prototype.rowClassName=function(e,t){var n=this.props,r=n.rowClassNameExpr,o=n.store,i=n.themeCss,s=n.id,l=n.rowClassName,d=[];l&&d.push(l),r&&d.push((0,h.pbD)(r,{record:e,rowIndex:t}));var c=o.getRowByIndex(t);return(null==c?void 0:c.modified)&&d.push("is-modified"),(null==c?void 0:c.moved)&&d.push("is-moved"),d.push((0,h.NH8)((0,a.__assign)((0,a.__assign)({},this.props),{name:"tableRowClassname",id:s,themeCss:i}))),d.join(" ")},t.prototype.buildRowSelection=function(){var e=this,t=this.props,n=t.selectable,r=t.multiple,o=t.maxKeepItemSelectionLength,i=t.rowSelection,s=t.store,l=null;if(n)l={type:!1===r?"radio":"",selectedRowKeys:s.currentSelectedRowKeys,maxSelectedLength:o};else if(i){i.selectedRowKeys;var d=i.selections,c=(0,a.__rest)(i,["selectedRowKeys","selections"]);(l=(0,a.__assign)({selectedRowKeys:s.currentSelectedRowKeys,maxSelectedLength:o},c)).getCheckboxProps=function(t,n){var a=e.props,r=a.rowSelection,o=a.maxKeepItemSelectionLength,i=a.store,s=null==r?void 0:r.disableOn;return{disabled:!!s&&(0,h.pgu)(s,{record:t,rowIndex:n})||o&&i.currentSelectedRowKeys.length>=o&&!i.currentSelectedRowKeys.includes(t[i.keyField])}},i.disableOn&&delete l.disableOn,d&&Array.isArray(d)&&(l.selections=[],d.forEach(function(e){l.selections.push({key:e.key,text:e.text,onSelect:function(t){var n;n=t.filter(function(t,n){return"all"===e.key||"none"!==e.key&&("invert"===e.key?!s.currentSelectedRowKeys.includes(t):"odd"===e.key?n%2==0:"even"!==e.key||n%2!=0)}),s.updateSelected(n)}})}))}return l},t.prototype.expandedRowClassName=function(e,t){var n=this.props.expandable;return(0,h.pbD)(null==n?void 0:n.expandedRowClassNameExpr,{record:e,rowIndex:t})},t.prototype.expandedRowRender=function(e,t){var n=this.props.expandable;return this.renderSchema("expandableBody",(0,a.__assign)({},n),{data:(0,a.__assign)((0,a.__assign)((0,a.__assign)({},this.props.data),e),{rowIndex:t})})},t.prototype.rowExpandable=function(e,t,n){var a=this.props.expandable;return!!(null==a?void 0:a.expandableOn)&&(0,h.pgu)(a.expandableOn,{record:e,rowIndex:t})},t.prototype.buildExpandable=function(){var e=this.props,t=e.expandable,n=e.store,r=null;if(t){t.expandedRowKeys;var o=(0,a.__rest)(t,["expandedRowKeys"]);r=(0,a.__assign)({expandedRowKeys:n.currentExpandedKeys},o),t.expandableOn&&(r.rowExpandable=this.rowExpandable,delete r.expandableOn),t&&t.type&&(r.expandedRowRender=this.expandedRowRender),t.expandedRowClassNameExpr&&(r.expandedRowClassName=this.expandedRowClassName,delete r.expandedRowClassNameExpr)}return r},t.prototype.reloadTarget=function(e,t){this.context.reload(e,t)},t.prototype.handleSave=function(){return(0,a.__awaiter)(this,void 0,void 0,function(){var e,t,n,r,o,i,s,l,d,c,u=this;return(0,a.__generator)(this,function(a){switch(a.label){case 0:return e=this.props,t=e.store,n=e.onSave,r=e.primaryField,o=e.keyField,t.modifiedRows.length?(i=[],Object.keys(this.subForms).forEach(function(e){return u.subForms[e]&&i.push(u.subForms[e])}),i.length?[4,Promise.all(i.map(function(e){return e.validate()}))]:[3,2]):[2];case 1:if(~a.sent().indexOf(!1))return[2];a.label=2;case 2:return s=t.modifiedRows.map(function(e){return e.data}),l=t.modifiedRows.map(function(e){return e.path}),d=t.modifiedRows.map(function(e){return(0,h.iv2)(e.data,e.pristine,[o,r])}),c=t.rows.filter(function(e){return!e.modified}).map(function(e){return e.data}),n?(n(s,d,l,c,t.modifiedRows.map(function(e){return e.pristine})),[2]):(this.handleQuickSave(s,d,l,c,t.modifiedRows.map(function(e){return e.pristine})),[2])}})})},t.prototype.handleQuickSave=function(e,t,n,a,r,o){var i=this,s=this.props,l=s.store,d=s.quickSaveApi,c=s.quickSaveItemApi,u=s.primaryField,p=s.keyField,m=s.env,_=s.messages,v=s.reload,y=s.dispatchEvent;if(Array.isArray(e)){if(!(0,h.Amo)(d))return void(m&&m.alert("Table2 quickSaveApi is required"));var f=u||p,g=(0,h.ed2)(l.data,{rows:e,rowsDiff:t,indexes:n,rowsOrigin:r});e.length&&e[0].hasOwnProperty(f)&&(g.ids=e.map(function(e){return e[f]}).join(",")),a&&(g.unModifiedItems=a),l.saveRemote(d,g,{successMessage:_&&_.saveFailed,errorMessage:_&&_.saveSuccess}).then(function(){y("quickSaveSubmitted",g),v&&i.reloadTarget((0,h.Wvn)(v,g),g)}).catch(function(){})}else{if(!(0,h.Amo)(c))return void(m&&m.alert("Table2 quickSaveItemApi is required!"));var b=(0,h.ed2)(l.data,{item:e,modified:t,origin:r}),w=(0,h.ed2)(b,e);l.saveRemote(c,w).then(function(){y("quickSaveSubmitted",w),v&&i.reloadTarget((0,h.Wvn)(v,b),b)}).catch(function(){(null==o?void 0:o.resetOnFailed)&&i.reset()})}},t.prototype.handleQuickChange=function(e,t,n,a,r){if((0,s.isAlive)(e)){var o=this.props,i=o.onSave,l=o.onPristineChange,d=o.saveImmediately,c=o.primaryField,u=o.keyField,p=o.quickSaveItemApi;e.change(t,a),e.modified&&this.syncSelected(),a?null==l||l(e.data,e.path):(n||d)&&(n&&n.api?this.props.onAction&&this.props.onAction(null,{actionType:"ajax",api:n.api,reload:null==r?void 0:r.reload},e.locals):i?i(e.data,(0,h.iv2)(e.data,e.pristine,[u,c]),e.path,void 0,e.pristine,r):this.handleQuickSave(p?e.data:[e.data],(0,h.iv2)(e.data,e.pristine,[u,c]),[e.path],void 0,e.pristine,r))}},t.prototype.handleAction=function(e,t,n){var a=this.props.onAction;a&&a(e,t,n)},t.prototype.renderActions=function(e){var t=this,n=this.props,o=n.actions,i=n.render,s=n.store,l=n.classnames,d=n.data,c=n.columnsTogglable,u=n.dispatchEvent;o=Array.isArray(o)?o.concat():[];var p=(0,h.Gvm)(c)?c:{align:"left"};return s.toggable&&"header"===e&&!~this.renderedToolbars.indexOf("columns-toggler")&&o.push({type:"button",children:i("column-toggler",(0,a.__assign)((0,a.__assign)({},p),{type:"column-toggler"}),{cols:s.columnsData,toggleAllColumns:function(){s.toggleAllColumns(),u("columnToggled",(0,h.ed2)(d,{columns:s.columnsData.filter(function(e){return e.toggled})}))},toggleToggle:function(e){s.columnsData[e].toggleToggle(),u("columnToggled",(0,h.ed2)(d,{columns:s.columnsData.filter(function(e){return e.toggled})}))}})}),Array.isArray(o)&&o.length?r.createElement("div",{className:l("Table-toolbar")},o.map(function(e,n){return i("action/".concat(n),(0,a.__assign)({type:"button"},e),{onAction:t.handleAction,key:n,btnDisabled:s.dragging,data:s.getData(d)})})):null},t.prototype.handleSelected=function(e,t,n){return(0,a.__awaiter)(this,void 0,void 0,function(){var r,o,i,s,l;return(0,a.__generator)(this,function(a){switch(a.label){case 0:return r=this.props,o=r.dispatchEvent,i=r.data,s=r.store,[4,o("selectedChange",(0,h.ed2)(i,{selectedItems:e,unSelectedItems:n}))];case 1:return(null==(l=a.sent())?void 0:l.prevented)?[2,null==l?void 0:l.prevented]:(s.updateSelected(t),this.syncSelected(),[2])}})})},t.prototype.handleSort=function(e){return(0,a.__awaiter)(this,void 0,void 0,function(){var t,n,r,o,i;return(0,a.__generator)(this,function(a){switch(a.label){case 0:return t=this.props,n=t.dispatchEvent,r=t.data,o=t.onSort,[4,n("columnSort",(0,h.ed2)(r,{orderBy:e.orderBy,orderDir:e.orderDir}))];case 1:return(null==(i=a.sent())?void 0:i.prevented)?[2,null==i?void 0:i.prevented]:(o&&o(e),[2])}})})},t.prototype.handleFilter=function(e){return(0,a.__awaiter)(this,void 0,void 0,function(){var t,n,r,o,i;return(0,a.__generator)(this,function(a){switch(a.label){case 0:return t=this.props,n=t.dispatchEvent,r=t.data,o=t.onSearch,[4,n("columnFilter",(0,h.ed2)(r,e))];case 1:return(null==(i=a.sent())?void 0:i.prevented)?[2,null==i?void 0:i.prevented]:(o&&o(e),[2])}})})},t.prototype.handleSearch=function(e,t){return(0,a.__awaiter)(this,void 0,void 0,function(){var n,r,o,i,s,l,d;return(0,a.__generator)(this,function(a){switch(a.label){case 0:return n=this.props,r=n.data,o=n.dispatchEvent,i=n.store,s=n.onSearch,[4,o("columnSearch",(0,h.ed2)(r,{searchName:e,searchValue:t}))];case 1:return(null==(l=a.sent())?void 0:l.prevented)||(i.updateQuery(t),s&&s(((d={})[e]=t[e],d))),[2]}})})},t.prototype.handleRowClick=function(e,t,n){return(0,a.__awaiter)(this,void 0,void 0,function(){var r,o,i,s,l;return(0,a.__generator)(this,function(a){switch(a.label){case 0:return r=this.props,o=r.dispatchEvent,i=r.data,s=r.onRow,[4,o("rowClick",(0,h.ed2)(i,{item:t,index:n}))];case 1:return(null==(l=a.sent())?void 0:l.prevented)||t&&s&&s.onRowClick&&s.onRowClick(e,t,n),[2]}})})},t.prototype.handleRowDbClick=function(e,t,n){return(0,a.__awaiter)(this,void 0,void 0,function(){var r,o,i,s,l;return(0,a.__generator)(this,function(a){switch(a.label){case 0:return r=this.props,o=r.dispatchEvent,i=r.data,s=r.onRow,[4,o("rowDbClick",(0,h.ed2)(i,{item:t,index:n}))];case 1:return(null==(l=a.sent())?void 0:l.prevented)?[2,!1]:(t&&s&&s.onRowDbClick&&s.onRowDbClick(e,t,n),[2,!0])}})})},t.prototype.handleRowMouseEnter=function(e,t,n){var r;return(0,a.__awaiter)(this,void 0,void 0,function(){var o,i,s,l,d;return(0,a.__generator)(this,function(a){switch(a.label){case 0:return null===(r=null==e?void 0:e.persist)||void 0===r||r.call(e),o=this.props,i=o.dispatchEvent,s=o.data,l=o.onRow,[4,i("rowMouseEnter",(0,h.ed2)(s,{item:t,index:n}))];case 1:return(null==(d=a.sent())?void 0:d.prevented)||t&&l&&l.onRowMouseEnter&&l.onRowMouseEnter(e,t,n),[2]}})})},t.prototype.handleRowMouseLeave=function(e,t,n){var r;return(0,a.__awaiter)(this,void 0,void 0,function(){var o,i,s,l,d;return(0,a.__generator)(this,function(a){switch(a.label){case 0:return null===(r=null==e?void 0:e.persist)||void 0===r||r.call(e),o=this.props,i=o.dispatchEvent,s=o.data,l=o.onRow,[4,i("rowMouseLeave",(0,h.ed2)(s,{item:t,index:n}))];case 1:return(null==(d=a.sent())?void 0:d.prevented)||t&&l&&l.onRowMouseLeave&&l.onRowMouseLeave(e,t,n),[2]}})})},t.prototype.handleOrderChange=function(e,t,n){return(0,a.__awaiter)(this,void 0,void 0,function(){var r,o;return(0,a.__generator)(this,function(a){return r=this.props.store,o=r.getRowByIndex(e,n),r.exchange(e,t,o),[2]})})},t.prototype.handleSaveOrder=function(){return(0,a.__awaiter)(this,void 0,void 0,function(){var e,t,n,r,o,i,s,l;return(0,a.__generator)(this,function(a){switch(a.label){case 0:return e=this.props,t=e.store,n=e.onSaveOrder,r=e.data,o=e.dispatchEvent,i=t.movedRows.map(function(e){return e.data}),s=t.rows.map(function(e){return e.getDataWithModifiedChilden()}),[4,o("orderChange",(0,h.ed2)(r,{movedItems:i}))];case 1:return(null==(l=a.sent())?void 0:l.prevented)?[2]:n&&t.movedRows.length?(n(i,s),[2]):[2]}})})},t.prototype.doAction=function(e,t,n,a){var r=this;void 0===n&&(n=!1);var o=this.props,i=o.store,s=o.data,l=o.keyField,d=o.expandable,c=o.primaryField,u=null==e?void 0:e.actionType,p=i.keyField,m=i.getData(s).items||[];switch(u){case"selectAll":i.updateSelectedAll();break;case"clearAll":i.updateSelected([]);break;case"select":var _=[];m.forEach(function(e,t){(0,h.pgu)((null==a?void 0:a.selected)||(null==a?void 0:a.selectedRowKeysExpr),{record:e,rowIndex:t})&&_.push(e[p])}),i.updateSelected(_);break;case"expand":var v=c||(null==d?void 0:d.keyField)||l,y=[],f=[];if(null==a?void 0:a.value){var g=m.findIndex(function(e){return e[v]===a.value}),b=m[g];this.tableRef&&this.tableRef.isExpandableRow(b,g)&&(this.tableRef.isExpanded(b)?f.push(b):y.push(b))}else(null==a?void 0:a.expandedRowsExpr)&&m.forEach(function(e,t){(0,h.pgu)(null==a?void 0:a.expandedRowsExpr,{record:e,rowIndex:t})&&r.tableRef&&r.tableRef.isExpandableRow(e,t)&&(r.tableRef.isExpanded(e)?f.push(e):y.push(e))});y.length>0&&this.tableRef&&this.tableRef.onExpandRows(y),f.length>0&&this.tableRef&&this.tableRef.onCollapseRows(f);break;default:this.handleAction(void 0,e,s)}},t.prototype.getRef=function(e){this.tableRef=e},t.prototype.renderTable=function(){var e=this.props,t=e.render,n=e.title,o=e.footer,i=(e.rowSelection,e.selectable,e.multiple,e.columns,e.expandable,e.footSummary),s=e.headSummary,l=e.loading,d=e.classnames,c=e.placeholder,u=(e.rowClassNameExpr,e.itemActions),p=e.keyField,m=e.primaryField,v=(e.maxKeepItemSelectionLength,e.onRow),y=e.store,f=e.id,g=e.themeCss,b=(0,a.__rest)(e,["render","title","footer","rowSelection","selectable","multiple","columns","expandable","footSummary","headSummary","loading","classnames","placeholder","rowClassNameExpr","itemActions","keyField","primaryField","maxKeepItemSelectionLength","onRow","store","id","themeCss"]),w=void 0;if(u){var S=Array.isArray(u)?u.filter(function(e){return!e.hiddenOnHover}):[];if(!S.length)return null;w=function(e,n){return r.createElement("div",{className:d("Table-itemActions")},S.map(function(r,o){return t("itemAction/".concat(o),(0,a.__assign)((0,a.__assign)({},r),{isMenuItem:!0}),{key:o,item:e,data:e,rowIndex:n})}))}}var x={data:this.props.data};return r.createElement(_.XI,(0,a.__assign)({},b,{headerClassName:(0,h.NH8)((0,a.__assign)((0,a.__assign)({},this.props),{name:"tableHeadClassname",id:f,themeCss:g})),bodyClassname:(0,h.NH8)((0,a.__assign)((0,a.__assign)({},this.props),{name:"tableBodyClassname",id:f,themeCss:g})),onRef:this.getRef,title:this.renderSchema("title",n,x),footer:this.renderSchema("footer",o,x),columns:this.columns,dataSource:y.dataSource,rowSelection:this.rowSelection,rowClassName:this.rowClassName,expandable:this.expandable,footSummary:this.buildSummary("footSummary",i),headSummary:this.buildSummary("headSummary",s),loading:this.renderSchema("loading",l,x),placeholder:this.renderSchema("placeholder",c,x),onSelect:this.handleSelected,onSelectAll:this.handleSelected,onSort:this.handleSort,onFilter:this.handleFilter,onDrag:this.handleOrderChange,itemActions:w,keyField:m||p,onRow:(0,a.__assign)((0,a.__assign)({},v),{onRowClick:this.handleRowClick,onRowDbClick:this.handleRowDbClick,onRowMouseEnter:this.handleRowMouseEnter,onRowMouseLeave:this.handleRowMouseLeave})}))},t.prototype.renderHeading=function(){var e=this.props,t=e.store,n=e.hideQuickSaveBtn,a=e.classnames,o=e.headingClassName,i=e.saveImmediately,s=e.quickSaveApi,l=e.translate,d=e.columns,c=!1;if(1===t.modifiedRows.length){var u=(null==d?void 0:d.map(function(e){var t;return(null===(t=null==e?void 0:e.quickEdit)||void 0===t?void 0:t.saveImmediately)?null==e?void 0:e.name:""}).filter(function(e){return e}))||[],p=t.modifiedRows[0],v=(0,h.iv2)(p.data,p.pristine);m()(u,Object.keys(v)).length&&(c=!0)}return s&&!i&&!c&&t.modified&&!n||t.moved?r.createElement("div",{className:a("Table-heading",o),key:"heading"},i||!t.modified||n||c?t.moved?r.createElement("span",null,l("Table.moved",{moved:t.moved}),r.createElement("button",{type:"button",className:a("Button Button--size-xs Button--success m-l-sm"),onClick:this.handleSaveOrder},r.createElement(_.In,{icon:"check",className:"icon m-r-xs"}),l("Form.submit")),r.createElement("button",{type:"button",className:a("Button Button--size-xs Button--danger m-l-sm"),onClick:this.reset},r.createElement(_.In,{icon:"close",className:"icon m-r-xs"}),l("Table.discard"))):"":r.createElement("span",null,l("Table.modified",{modified:t.modified}),r.createElement("button",{type:"button",className:a("Button Button--size-xs Button--success m-l-sm"),onClick:this.handleSave},r.createElement(_.In,{icon:"check",className:"icon m-r-xs"}),l("Form.submit")),r.createElement("button",{type:"button",className:a("Button Button--size-xs Button--danger m-l-sm"),onClick:this.reset},r.createElement(_.In,{icon:"close",className:"icon m-r-xs"}),l("Table.discard")))):null},t.prototype.render=function(){var e=this.props,t=e.classnames,n=e.style,o=e.store,i=e.themeCss,s=e.wrapperCustomStyle,l=e.id,d=e.env;this.renderedToolbars=[];var c=this.renderHeading();return r.createElement("div",{className:t("Table-render-wrapper",(0,h.NH8)((0,a.__assign)((0,a.__assign)({},this.props),{name:"wrapperCustomStyle",id:l,themeCss:s})),{"Table--unsaved":!!o.modified||!!o.moved}),style:n},this.renderActions("header"),c,this.renderTable(),r.createElement(h.z4D,(0,a.__assign)({},this.props,{config:{themeCss:i,classNames:[{key:"tableHeadClassname",weights:{default:{inner:".".concat(t("Table-table")," > thead > tr > th"),important:!0}}},{key:"tableHeadClassname",weights:{default:{inner:"> tr > th",important:!0}}},{key:"tableBodyClassname",weights:{default:{inner:"> tbody.".concat(t("Table-tbody")," > tr  td")},hover:{suf:"> tbody > tr",inner:"td",important:!0}}},{key:"tableRowClassname",weights:{default:{parent:".".concat(t("Table-table")," > tbody.").concat(t("Table-tbody")),inner:"td.".concat(t("Table-cell"))},hover:{parent:".".concat(t("Table-table")," > tbody.").concat(t("Table-tbody")),inner:"td.".concat(t("Table-cell"))}}}],wrapperCustomStyle:s,id:l},env:d})))},t.contextType=h.MzX,t.propsList=["source","columnsTogglable","columns","items","rowSelection","expandable","sticky","itemBadge","popOverContainer","keyField","childrenColumnName","rowClassNameExpr","lineHeight","bordered","footer","maxKeepItemSelectionLength","keepItemSelectionOnPageChange","itemActions","headingClassName","footSummary","headSummary","saveImmediately","selectable","multiple","primaryField","hideQuickSaveBtn","selected","placeholder","autoFillHeight"],t.defaultProps={keyField:"id",canAccessSuperData:!1,lazyRenderAfter:100},(0,a.__decorate)([h.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",void 0)],t.prototype,"getPopOverContainer",null),(0,a.__decorate)([h.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Number,Number]),(0,a.__metadata)("design:returntype",void 0)],t.prototype,"subFormRef",null),(0,a.__decorate)([h.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",void 0)],t.prototype,"reset",null),(0,a.__decorate)([h.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Number]),(0,a.__metadata)("design:returntype",void 0)],t.prototype,"rowClassName",null),(0,a.__decorate)([h.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Number]),(0,a.__metadata)("design:returntype",void 0)],t.prototype,"expandedRowClassName",null),(0,a.__decorate)([h.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Number]),(0,a.__metadata)("design:returntype",void 0)],t.prototype,"expandedRowRender",null),(0,a.__decorate)([h.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Number,Array]),(0,a.__metadata)("design:returntype",void 0)],t.prototype,"rowExpandable",null),(0,a.__decorate)([h.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",Promise)],t.prototype,"handleSave",null),(0,a.__decorate)([h.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Object,Array,Array,Object,Object]),(0,a.__metadata)("design:returntype",void 0)],t.prototype,"handleQuickSave",null),(0,a.__decorate)([h.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Object,Object,Boolean,Object]),(0,a.__metadata)("design:returntype",void 0)],t.prototype,"handleQuickChange",null),(0,a.__decorate)([h.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Object,Object]),(0,a.__metadata)("design:returntype",void 0)],t.prototype,"handleAction",null),(0,a.__decorate)([h.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Array,Array,Array]),(0,a.__metadata)("design:returntype",Promise)],t.prototype,"handleSelected",null),(0,a.__decorate)([h.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object]),(0,a.__metadata)("design:returntype",Promise)],t.prototype,"handleSort",null),(0,a.__decorate)([h.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object]),(0,a.__metadata)("design:returntype",Promise)],t.prototype,"handleFilter",null),(0,a.__decorate)([h.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[String,Object]),(0,a.__metadata)("design:returntype",Promise)],t.prototype,"handleSearch",null),(0,a.__decorate)([h.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Object,Number]),(0,a.__metadata)("design:returntype",Promise)],t.prototype,"handleRowClick",null),(0,a.__decorate)([h.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Object,Number]),(0,a.__metadata)("design:returntype",Promise)],t.prototype,"handleRowDbClick",null),(0,a.__decorate)([h.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Object,Number]),(0,a.__metadata)("design:returntype",Promise)],t.prototype,"handleRowMouseEnter",null),(0,a.__decorate)([h.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Object,Number]),(0,a.__metadata)("design:returntype",Promise)],t.prototype,"handleRowMouseLeave",null),(0,a.__decorate)([h.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Number,Number,Array]),(0,a.__metadata)("design:returntype",Promise)],t.prototype,"handleOrderChange",null),(0,a.__decorate)([h.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",Promise)],t.prototype,"handleSaveOrder",null),(0,a.__decorate)([h.d6t,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object]),(0,a.__metadata)("design:returntype",void 0)],t.prototype,"getRef",null),t}(r.Component)),C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,a.__extends)(t,e),t.prototype.receive=function(e,t){var n,a,r,o=this.context;return(null===(n=this.props)||void 0===n?void 0:n.host)?null===(r=(a=this.props.host).receive)||void 0===r?void 0:r.call(a,e,t):t?o.send(t,e):void 0},t.prototype.reload=function(e,t,n){var a,r,o,i,s=this.context;return null===(a=null==s?void 0:s.parent)||void 0===a||a.getComponents(),(null===(r=this.props)||void 0===r?void 0:r.host)?null===(i=(o=this.props.host).reload)||void 0===i?void 0:i.call(o,e,t,n):e?s.reload(e,n):void 0},t.prototype.setData=function(e,t,n,r){var o;return(0,a.__awaiter)(this,void 0,void 0,function(){var i,s,l,d,c,u,p;return(0,a.__generator)(this,function(m){switch(m.label){case 0:return i=this.props.store,s=i.data.rows.length,void 0===n?[3,1]:(l=(0,a.__spreadArray)([],(0,a.__read)(i.data.rows),!1),String(n).split(",").forEach(function(t){var n=Number(t);l.splice(n,1,e)}),[2,i.updateData({rows:l},void 0,t)]);case 1:if(void 0===r)return[3,6];d=(0,a.__spreadArray)([],(0,a.__read)(i.data.rows),!1),c=0,m.label=2;case 2:return c<s?(u=d[c],[4,(0,h.JnN)(r,u)]):[3,5];case 3:m.sent()&&d.splice(c,1,e),m.label=4;case 4:return c++,[3,2];case 5:return[2,i.updateData({rows:d},void 0,t)];case 6:return p=(0,a.__assign)((0,a.__assign)({},e),{rows:null!==(o=e.rows)&&void 0!==o?o:e.items}),[2,i.updateData(p,void 0,t)]}})})},t.prototype.getData=function(){var e=this.props,t=e.store,n=e.data;return t.getData(n)},(0,a.__decorate)([(0,h.A49)({type:"table2",storeType:h._rs.name,name:"table2",isolateScope:!0})],t)}(x)},38447:function(e,t,n){n.r(t),n.d(t,{ColumnTogglerRenderer:function(){return l}});var a=n(31635),r=n(96540),o=n(5917),i=n(25627),s=n(75935),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,a.__extends)(t,e),t.prototype.render=function(){var e=this.props,t=(e.className,e.store,e.render),n=e.classPrefix,l=e.classnames,d=e.tooltip,c=e.align,u=e.cols,p=e.toggleAllColumns,m=e.toggleToggle,h=e.data,_=e.size,v=e.popOverContainer,y=(0,a.__rest)(e,["className","store","render","classPrefix","classnames","tooltip","align","cols","toggleAllColumns","toggleToggle","data","size","popOverContainer"]),f=y.translate,g=y.env;if(!u)return null;var b=u.filter(function(e){return(0,o.zNq)(e.pristine||e,h)&&!1!==e.toggable}),w=b.filter(function(e){return!1!==e.toggled});return r.createElement(s.A,(0,a.__assign)({},y,{render:t,tooltip:d||f("Table.columnsVisibility"),tooltipContainer:v||g.getModalContainer,isActived:-1!==u.findIndex(function(e){return!e.toggled}),align:null!=c?c:"right",size:_||"sm",classnames:l,classPrefix:n,key:"columns-toggable",columns:u,activeToggaleColumns:w,data:h}),(null==b?void 0:b.length)?r.createElement("li",{className:l("ColumnToggler-menuItem"),key:"selectAll",onClick:function(){p&&p((null==w?void 0:w.length)<=0)}},r.createElement(i.Sc,{size:"sm",classPrefix:n,key:"checkall",checked:!!(null==w?void 0:w.length),partial:!(!(null==w?void 0:w.length)||(null==w?void 0:w.length)===(null==b?void 0:b.length))},f("Select.checkAll"))):null,null==b?void 0:b.map(function(e,a){return r.createElement("li",{className:l("ColumnToggler-menuItem"),key:"item"+(e.index||a),onClick:function(){m&&m(a)}},r.createElement(i.Sc,{size:"sm",classPrefix:n,checked:!1!==e.toggled},e.title?t("tpl",e.title):e.label||null))}))},(0,a.__decorate)([(0,o.A49)({type:"column-toggler",name:"column-toggler"})],t)}(r.Component)}}]);